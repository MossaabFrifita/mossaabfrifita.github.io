"use strict";(self.webpackChunkmy_blog=self.webpackChunkmy_blog||[]).push([[4652],{729:(e,s,n)=>{n.r(s),n.d(s,{assets:()=>l,contentTitle:()=>i,default:()=>u,frontMatter:()=>c,metadata:()=>t,toc:()=>a});var r=n(5893),o=n(1151);const c={sidebar_position:3},i=void 0,t={id:"devops/Installez et configurez Docker",title:"Installez et configurez Docker",description:"Installez Docker sur masterserver en suivant le lien d'installation pour Ubuntu ou en suivant les \xe9tapes suivantes :",source:"@site/docs/devops/Installez et configurez Docker.md",sourceDirName:"devops",slug:"/devops/Installez et configurez Docker",permalink:"/docs/devops/Installez et configurez Docker",draft:!1,unlisted:!1,tags:[],version:"current",sidebarPosition:3,frontMatter:{sidebar_position:3},sidebar:"tutorialSidebar",previous:{title:"Cr\xe9ez votre environnement de travail",permalink:"/docs/devops/Cr\xe9ez votre environnement de travail"},next:{title:"Cr\xe9ez une simple application Spring Boot",permalink:"/docs/devops/Cr\xe9ez une simple application Spring Boot"}},l={},a=[{value:"Exposer Docker Engine via l&#39;API REST",id:"exposer-docker-engine-via-lapi-rest",level:2}];function d(e){const s={a:"a",code:"code",h2:"h2",img:"img",li:"li",ol:"ol",p:"p",pre:"pre",...(0,o.a)(),...e.components};return(0,r.jsxs)(r.Fragment,{children:[(0,r.jsxs)(s.p,{children:["Installez Docker sur ",(0,r.jsx)(s.code,{children:"masterserver"})," en suivant le lien d'installation pour ",(0,r.jsx)(s.a,{href:"https://docs.docker.com/engine/install/ubuntu/",children:"Ubuntu"})," ou en suivant les \xe9tapes suivantes :"]}),"\n",(0,r.jsxs)(s.ol,{children:["\n",(0,r.jsx)(s.li,{children:"Ex\xe9cutez la commande suivante pour d\xe9sinstaller tous les packages en conflit :"}),"\n"]}),"\n",(0,r.jsx)(s.pre,{children:(0,r.jsx)(s.code,{className:"language-bash",children:"for pkg in docker.io docker-doc docker-compose docker-compose-v2 podman-docker containerd runc; do sudo apt-get remove $pkg; done\n"})}),"\n",(0,r.jsxs)(s.ol,{start:"2",children:["\n",(0,r.jsx)(s.li,{children:"Configurez le r\xe9f\xe9rentiel apt de Docker :"}),"\n"]}),"\n",(0,r.jsx)(s.pre,{children:(0,r.jsx)(s.code,{className:"language-bash",children:'# Add Docker\'s official GPG key:\r\nsudo apt-get update\r\nsudo apt-get install ca-certificates curl\r\nsudo install -m 0755 -d /etc/apt/keyrings\r\nsudo curl -fsSL https://download.docker.com/linux/ubuntu/gpg -o /etc/apt/keyrings/docker.asc\r\nsudo chmod a+r /etc/apt/keyrings/docker.asc\r\n\r\n# Add the repository to Apt sources:\r\necho \\\r\n  "deb [arch=$(dpkg --print-architecture) signed-by=/etc/apt/keyrings/docker.asc] https://download.docker.com/linux/ubuntu \\\r\n  $(. /etc/os-release && echo "$VERSION_CODENAME") stable" | \\\r\n  sudo tee /etc/apt/sources.list.d/docker.list > /dev/null\r\nsudo apt-get update\n'})}),"\n",(0,r.jsxs)(s.ol,{start:"3",children:["\n",(0,r.jsx)(s.li,{children:"Installez les packages Docker :"}),"\n"]}),"\n",(0,r.jsx)(s.pre,{children:(0,r.jsx)(s.code,{className:"language-bash",children:"sudo apt-get install docker-ce docker-ce-cli containerd.io docker-buildx-plugin docker-compose-plugin\n"})}),"\n",(0,r.jsxs)(s.p,{children:["Si vous souhaitez ex\xe9cuter des commandes Docker directement depuis votre machine h\xf4te (dans mon cas, Windows), vous avez besoin de ",(0,r.jsx)(s.code,{children:"docker cli"})," pour communiquer avec Docker Engine install\xe9 sur le serveur, tel que le ",(0,r.jsx)(s.code,{children:"masterserver"})," dans notre cas. C'est particuli\xe8rement utile, car cela permet de cr\xe9er et d'ex\xe9cuter des images Docker directement depuis l'IDE dans notre environnement de d\xe9veloppement."]}),"\n",(0,r.jsx)(s.p,{children:"Pour ce faire, c'est tr\xe8s simple : il suffit d'exposer le Docker Engine via son API REST."}),"\n",(0,r.jsx)(s.h2,{id:"exposer-docker-engine-via-lapi-rest",children:"Exposer Docker Engine via l'API REST"}),"\n",(0,r.jsxs)(s.p,{children:["Pour permettre l'acc\xe8s \xe0 l'API REST de Docker Engine dans ",(0,r.jsx)(s.code,{children:"masterserver"}),", suivez ces \xe9tapes :"]}),"\n",(0,r.jsxs)(s.ol,{children:["\n",(0,r.jsxs)(s.li,{children:["Modifiez le fichier ",(0,r.jsx)(s.code,{children:"/lib/systemd/system/docker.service"}),"."]}),"\n",(0,r.jsxs)(s.li,{children:["Ajoutez l'option ",(0,r.jsx)(s.code,{children:"-H=tcp://0.0.0.0:2375"})," au param\xe8tre ",(0,r.jsx)(s.code,{children:"ExecStart"})," :"]}),"\n"]}),"\n",(0,r.jsx)(s.pre,{children:(0,r.jsx)(s.code,{className:"language-bash",children:"ExecStart=/usr/bin/dockerd -H fd:// -H=tcp://0.0.0.0:2375 \xa0--containerd=/run/containerd/containerd.sock\n"})}),"\n",(0,r.jsxs)(s.p,{children:["Note ",":Lorsque"," vous utilisez ",(0,r.jsx)(s.code,{children:"0.0.0.0"})," comme adresse IP pour Docker, cela signifie que Docker \xe9coute sur toutes les interfaces r\xe9seau disponibles sur le syst\xe8me. En production, il est g\xe9n\xe9ralement conseill\xe9 de limiter l'\xe9coute \xe0 une interface sp\xe9cifique et d'utiliser des m\xe9canismes de s\xe9curit\xe9 tels que TLS pour s\xe9curiser les communications avec le d\xe9mon Docker."]}),"\n",(0,r.jsxs)(s.ol,{start:"3",children:["\n",(0,r.jsxs)(s.li,{children:["Red\xe9marrez le service Docker pour appliquer les modifications : ",(0,r.jsx)(s.code,{children:"sudo systemctl restart docker"})]}),"\n"]}),"\n",(0,r.jsxs)(s.p,{children:["Pour installer Docker CLI sur Windows, installez ",(0,r.jsx)(s.a,{href:"https://chocolatey.org/install",children:"Chocolatey"}),"  qui est un gestionnaire de packages pour Windows."]}),"\n",(0,r.jsx)(s.p,{children:"Dans l'invite de commandes, ex\xe9cutez la commande suivante :"}),"\n",(0,r.jsx)(s.pre,{children:(0,r.jsx)(s.code,{children:"choco install docker-cli\n"})}),"\n",(0,r.jsxs)(s.p,{children:["Cr\xe9ez une variable d'environnement ",(0,r.jsx)(s.code,{children:"DOCKER_HOST tcp://192.168.1.137:2375"})," pour sp\xe9cifier l'adresse du serveur sur lequel Docker est install\xe9. Dans notre cas c'est le ",(0,r.jsx)(s.code,{children:"masterserver"}),"."]}),"\n",(0,r.jsx)(s.p,{children:(0,r.jsx)(s.img,{alt:"image-20240102200340516",src:n(4793).Z+"",width:"592",height:"234"})}),"\n",(0,r.jsxs)(s.p,{children:["Cela permet \xe0 Docker CLI de se connecter \xe0 distance \xe0 l'instance Docker sur le serveur ",(0,r.jsx)(s.code,{children:"masterserver"}),"."]}),"\n",(0,r.jsxs)(s.p,{children:["Depuis le terminal de votre machine h\xf4te tapez ",(0,r.jsx)(s.code,{children:"docker --version"})," pour v\xe9rifier que vous avez bien acc\xe8s au docker engine :"]}),"\n",(0,r.jsx)(s.pre,{children:(0,r.jsx)(s.code,{className:"language-bash",children:"C:\\Users\\Utilisateur\\Desktop\\Mossaab\\donw\\cmder_mini\r\n\u03bb docker --version\r\nDocker version 24.0.7, build afdd53b\n"})})]})}function u(e={}){const{wrapper:s}={...(0,o.a)(),...e.components};return s?(0,r.jsx)(s,{...e,children:(0,r.jsx)(d,{...e})}):d(e)}},4793:(e,s,n)=>{n.d(s,{Z:()=>r});const r=n.p+"assets/images/image-20240102200340516-87b6fa031056bd18290af836158475c5.png"},1151:(e,s,n)=>{n.d(s,{Z:()=>t,a:()=>i});var r=n(7294);const o={},c=r.createContext(o);function i(e){const s=r.useContext(c);return r.useMemo((function(){return"function"==typeof e?e(s):{...s,...e}}),[s,e])}function t(e){let s;return s=e.disableParentContext?"function"==typeof e.components?e.components(o):e.components||o:i(e.components),r.createElement(c.Provider,{value:s},e.children)}}}]);