"use strict";(self.webpackChunkmy_blog=self.webpackChunkmy_blog||[]).push([[9116],{9623:(e,s,n)=>{n.r(s),n.d(s,{assets:()=>t,contentTitle:()=>a,default:()=>u,frontMatter:()=>l,metadata:()=>o,toc:()=>d});var r=n(5893),i=n(1151);const l={sidebar_position:8},a=void 0,o={id:"devops/Utilisez Ansible pour automatiser le d\xe9ploiement de votre application",title:"Utilisez Ansible pour automatiser le d\xe9ploiement de votre application",description:"Ansible est un outil de gestion de configuration qui permet d'automatiser des t\xe2ches avec des scripts d'automatisation.",source:"@site/docs/devops/Utilisez Ansible pour automatiser le d\xe9ploiement de votre application.md",sourceDirName:"devops",slug:"/devops/Utilisez Ansible pour automatiser le d\xe9ploiement de votre application",permalink:"/docs/devops/Utilisez Ansible pour automatiser le d\xe9ploiement de votre application",draft:!1,unlisted:!1,tags:[],version:"current",sidebarPosition:8,frontMatter:{sidebar_position:8},sidebar:"tutorialSidebar",previous:{title:"Cr\xe9ez un registre docker priv\xe9 et un docker hub proxy avec Nexus",permalink:"/docs/devops/Cr\xe9ez un registre docker priv\xe9 et un docker hub proxy avec Nexus"},next:{title:"G\xe9rez le Versioning en livraison continue",permalink:"/docs/devops/G\xe9rez le Versioning en livraison continue"}},t={},d=[{value:"Mode de fonctionnement",id:"mode-de-fonctionnement",level:2},{value:"Identifiez votre architecture technique pour Ansible",id:"identifiez-votre-architecture-technique-pour-ansible",level:2},{value:"Cr\xe9ez un simple utilisateur",id:"cr\xe9ez-un-simple-utilisateur",level:2},{value:"Installez Ansible",id:"installez-ansible",level:2},{value:"Cr\xe9ez votre environnement de travail",id:"cr\xe9ez-votre-environnement-de-travail",level:2},{value:"D\xe9veloppez \xe0 distance avec SSH dans VS Code",id:"d\xe9veloppez-\xe0-distance-avec-ssh-dans-vs-code",level:3},{value:"Ansible Inventory (l&#39;inventaire des nodes)",id:"ansible-inventory-linventaire-des-nodes",level:2},{value:"Cr\xe9ez le fichier inventaire Ansible",id:"cr\xe9ez-le-fichier-inventaire-ansible",level:2},{value:"Type d&#39;instances dans l&#39;inventaire d&#39;Ansible",id:"type-dinstances-dans-linventaire-dansible",level:2},{value:"Les modules",id:"les-modules",level:2},{value:"V\xe9rifiez la communication avec les nodes",id:"v\xe9rifiez-la-communication-avec-les-nodes",level:2},{value:"Utilisez Ansible en mode imp\xe9ratif (ad-hoc) avec la commande Ansible",id:"utilisez-ansible-en-mode-imp\xe9ratif-ad-hoc-avec-la-commande-ansible",level:3},{value:"Utilisez Ansible en mode d\xe9claratif (ansible-playbook)",id:"utilisez-ansible-en-mode-d\xe9claratif-ansible-playbook",level:3},{value:"La structure d&#39;un playbook",id:"la-structure-dun-playbook",level:3},{value:"Utilisez l&#39;extension VS Code Ansible",id:"utilisez-lextension-vs-code-ansible",level:2},{value:"Passez au format YAML avec le fichier d&#39;inventaire",id:"passez-au-format-yaml-avec-le-fichier-dinventaire",level:2},{value:"Les variables en Ansible",id:"les-variables-en-ansible",level:2},{value:"D\xe9finissez les variables dans le fichier d&#39;inventaire",id:"d\xe9finissez-les-variables-dans-le-fichier-dinventaire",level:3},{value:"D\xe9finissez les variables dans le playbook",id:"d\xe9finissez-les-variables-dans-le-playbook",level:3},{value:"Passez les variables \xe0 partir de la ligne de commande",id:"passez-les-variables-\xe0-partir-de-la-ligne-de-commande",level:3},{value:"Structurez vos variables avec les r\xe9pertoires host_vars et group_vars",id:"structurez-vos-variables-avec-les-r\xe9pertoires-host_vars-et-group_vars",level:3},{value:"Cr\xe9ez un utilisateur standard et d\xe9ployer une cl\xe9 SSH sur les nodes",id:"cr\xe9ez-un-utilisateur-standard-et-d\xe9ployer-une-cl\xe9-ssh-sur-les-nodes",level:2},{value:"Chiffrez les donn\xe9es sensibles avec Ansible Vault",id:"chiffrez-les-donn\xe9es-sensibles-avec-ansible-vault",level:3},{value:"Cr\xe9ez le compte utilisateur avec Ansible Playbook",id:"cr\xe9ez-le-compte-utilisateur-avec-ansible-playbook",level:3},{value:"Installez docker sur les nodes avec Ansible Playbook",id:"installez-docker-sur-les-nodes-avec-ansible-playbook",level:2},{value:"Configurez docker pour le d\xe9ploiement",id:"configurez-docker-pour-le-d\xe9ploiement",level:2},{value:"D\xe9ployez votre application",id:"d\xe9ployez-votre-application",level:2}];function c(e){const s={a:"a",blockquote:"blockquote",code:"code",em:"em",h2:"h2",h3:"h3",img:"img",li:"li",ol:"ol",p:"p",pre:"pre",strong:"strong",ul:"ul",...(0,i.a)(),...e.components};return(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(s.p,{children:"Ansible est un outil de gestion de configuration qui permet d'automatiser des t\xe2ches avec des scripts d'automatisation."}),"\n",(0,r.jsx)(s.p,{children:"L'un des principes fondamentaux de la d\xe9marche DevOps est d'\xe9liminer les processus manuels, les t\xe2ches r\xe9p\xe9titives et les sources d'erreurs lors du d\xe9ploiement d'applications, assurant ainsi une livraison continue et une int\xe9gration continue."}),"\n",(0,r.jsx)(s.p,{children:"Avec l'utilisation d'Ansible, vous avez la capacit\xe9 de scripter et d'automatiser le d\xe9ploiement, tout en g\xe9rant automatiquement les t\xe2ches d'administration."}),"\n",(0,r.jsx)(s.p,{children:"Int\xe9gr\xe9 \xe0 notre pipeline CI/CD, il simplifie le d\xe9ploiement automatique de notre application Spring Boot en fonction de l'environnement cible (Production ou Staging)."}),"\n",(0,r.jsx)(s.h2,{id:"mode-de-fonctionnement",children:"Mode de fonctionnement"}),"\n",(0,r.jsxs)(s.p,{children:["Ansible fonctionne en mode ",(0,r.jsx)(s.code,{children:"push"}),", ce qui consiste \xe0 contr\xf4ler les serveurs cibles (",(0,r.jsx)(s.strong,{children:"nodes"}),") depuis un poste de contr\xf4le appel\xe9 ",(0,r.jsx)(s.strong,{children:"node manager"}),"."]}),"\n",(0,r.jsxs)(s.ul,{children:["\n",(0,r.jsx)(s.li,{children:"Le node manager est une machine disposant d'Ansible install\xe9, capable de contr\xf4ler les nodes \xe0 travers sa connexion SSH. Cela peut \xeatre n'importe quelle machine Linux, mais pas Windows."}),"\n",(0,r.jsx)(s.li,{children:"Les nodes sont les machines sur lesquelles Ansible effectue les installations. Ils peuvent avoir n'importe quel syst\xe8me d'exploitation, tant qu'ils sont accessibles par SSH et disposent d'une version de Python install\xe9e."}),"\n"]}),"\n",(0,r.jsxs)(s.p,{children:["Ansible est un outil ",(0,r.jsx)(s.code,{children:"agentless"}),", ce qui signifie qu'il n'installe pas d'agent sur les nodes ; il utilise uniquement SSH et Python."]}),"\n",(0,r.jsx)(s.p,{children:"Les t\xe2ches \xe0 ex\xe9cuter sont r\xe9dig\xe9es dans des fichiers de configuration au format YAML."}),"\n",(0,r.jsx)(s.h2,{id:"identifiez-votre-architecture-technique-pour-ansible",children:"Identifiez votre architecture technique pour Ansible"}),"\n",(0,r.jsx)(s.p,{children:"Votre architecture de d\xe9ploiement est constitu\xe9e de 3 serveurs (2 nodes et 1 node manager) :"}),"\n",(0,r.jsxs)(s.ul,{children:["\n",(0,r.jsxs)(s.li,{children:[(0,r.jsx)(s.code,{children:"prodserver"})," : Il s'agit de l'environnement de Production o\xf9 notre application sera d\xe9ploy\xe9e et utilis\xe9e par les utilisateurs finaux."]}),"\n",(0,r.jsxs)(s.li,{children:[(0,r.jsx)(s.code,{children:"testserver"})," : Il s'agit de l'environnement de Staging o\xf9 les nouvelles fonctionnalit\xe9s, les mises \xe0 jour ou les correctifs sont test\xe9s avant d'\xeatre d\xe9ploy\xe9s en production."]}),"\n",(0,r.jsxs)(s.li,{children:[(0,r.jsx)(s.code,{children:"nodemanager"})," : Il s'agit du serveur de contr\xf4le sur lequel Ansible sera install\xe9. Depuis ce serveur, les op\xe9rations de configuration et de d\xe9ploiement seront lanc\xe9es \xe0 distance sur les serveurs ",(0,r.jsx)(s.code,{children:"prodserver"})," et ",(0,r.jsx)(s.code,{children:"testserver"}),"."]}),"\n"]}),"\n",(0,r.jsx)(s.h2,{id:"cr\xe9ez-un-simple-utilisateur",children:"Cr\xe9ez un simple utilisateur"}),"\n",(0,r.jsxs)(s.p,{children:["Pour \xe9viter de travailler en tant que ",(0,r.jsx)(s.strong,{children:"root"})," sur le node manager (ce qui n'est vraiment pas recommand\xe9, car le compte root a des privil\xe8ges illimit\xe9s), vous allez cr\xe9er un utilisateur standard, par exemple ",(0,r.jsx)(s.strong,{children:"user-ansible"}),", avec les privil\xe8ges sudo :"]}),"\n",(0,r.jsxs)(s.ol,{children:["\n",(0,r.jsxs)(s.li,{children:["Cr\xe9ez l'utilisateur avec la commande : ",(0,r.jsx)(s.code,{children:"adduser user-ansible"}),"."]}),"\n",(0,r.jsxs)(s.li,{children:["D\xe9finissez un mot de passe pour cet utilisateur : ",(0,r.jsx)(s.code,{children:"passwd user-ansible"}),"."]}),"\n",(0,r.jsxs)(s.li,{children:["Ajoutez l'utilisateur dans le groupe wheel : ",(0,r.jsx)(s.code,{children:"usermod -a -G wheel user-ansible"}),"."]}),"\n"]}),"\n",(0,r.jsx)(s.p,{children:"Maintenant que l\u2019utilisateur est cr\xe9\xe9, vous pouvez l\u2019utiliser avec la commande suivante :"}),"\n",(0,r.jsx)(s.pre,{children:(0,r.jsx)(s.code,{className:"language-bash",children:"[root@nodemanager ~]# su - user-ansible\r\n[user-ansible@nodemanager ~]$\n"})}),"\n",(0,r.jsx)(s.p,{children:(0,r.jsxs)(s.em,{children:["Remarque : La ligne de commande commence par un ",(0,r.jsx)(s.strong,{children:"#"})," quand vous \xeates en ",(0,r.jsx)(s.strong,{children:"root"}),", et par un ",(0,r.jsx)(s.strong,{children:"$"})," quand vous \xeates en utilisateur standard."]})}),"\n",(0,r.jsx)(s.h2,{id:"installez-ansible",children:"Installez Ansible"}),"\n",(0,r.jsxs)(s.p,{children:["Vous allez installer Ansible sur votre serveur Centos ",(0,r.jsx)(s.code,{children:"nodemanager"}),", dans mon cas son adresse IP est : ",(0,r.jsx)(s.code,{children:"192.168.1.173"})]}),"\n",(0,r.jsxs)(s.p,{children:["Sur le ",(0,r.jsx)(s.code,{children:"nodemanager"}),", lancez la commande suivante pour installer Ansible"]}),"\n",(0,r.jsx)(s.pre,{children:(0,r.jsx)(s.code,{className:"language-bash",children:"sudo yum install ansible\n"})}),"\n",(0,r.jsxs)(s.p,{children:["Remarque : Ansible peut \xeatre install\xe9 via ",(0,r.jsx)(s.strong,{children:"pip"})," de ",(0,r.jsx)(s.strong,{children:"Python"})," dans un ",(0,r.jsx)(s.strong,{children:(0,r.jsx)(s.a,{href:"https://www.redhat.com/sysadmin/python-venv-ansible",children:"virtualenv"})})," ou non. L'avantage du virtualenv est de pouvoir installer plusieurs versions d'Ansible sur le m\xeame syst\xe8me de mani\xe8re isol\xe9e, et d'activer l'environnement de travail que vous souhaitez."]}),"\n",(0,r.jsx)(s.p,{children:"V\xe9rifiez la version d'Ansible install\xe9e :"}),"\n",(0,r.jsx)(s.pre,{children:(0,r.jsx)(s.code,{className:"language-bash",children:"[user-ansible@nodemanager ~]$ ansible --version\r\nansible 2.9.27\r\n  config file = /etc/ansible/ansible.cfg\r\n  configured module search path = [u'/home/user-ansible/.ansible/plugins/modules', u'/usr/share/ansible/plugins/modules']\r\n  ansible python module location = /usr/lib/python2.7/site-packages/ansible\r\n  executable location = /bin/ansible\r\n  python version = 2.7.5 (default, Nov 14 2023, 16:14:06) [GCC 4.8.5 20150623 (Red Hat 4.8.5-44)]\n"})}),"\n",(0,r.jsx)(s.h2,{id:"cr\xe9ez-votre-environnement-de-travail",children:"Cr\xe9ez votre environnement de travail"}),"\n",(0,r.jsx)(s.p,{children:"Vous allez configurer votre environnement de d\xe9veloppement afin de travailler \xe0 distance depuis votre machine locale. Ceci vous permettra d'utiliser un IDE tel que VS Code qui est tr\xe8s populaire et appr\xe9ci\xe9 par de nombreux DevOps."}),"\n",(0,r.jsx)(s.p,{children:"Si vous pr\xe9f\xe9rez, vous avez \xe9galement la possibilit\xe9 d'utiliser un \xe9diteur de texte simple comme vi, vim, nano, etc., directement sur le serveur."}),"\n",(0,r.jsxs)(s.p,{children:["Pour une meilleure organisation de votre travail, je vous recommande de cr\xe9er un dossier d\xe9di\xe9 regroupant l'ensemble de vos projets Ansible. Par exemple, sous le r\xe9pertoire personnel de ",(0,r.jsx)(s.strong,{children:"user-ansible"}),", cr\xe9ez un dossier nomm\xe9 ",(0,r.jsx)(s.strong,{children:"ansible-projects"}),"."]}),"\n",(0,r.jsx)(s.pre,{children:(0,r.jsx)(s.code,{className:"language-bash",children:"[user-ansible@nodemanager ~]$ pwd\r\n/home/user-ansible\r\n[user-ansible@nodemanager ~]$ mkdir ansible-projects\r\n[user-ansible@nodemanager ~]$ cd ansible-projects/\r\n[user-ansible@nodemanager ansible-projects]$\n"})}),"\n",(0,r.jsx)(s.h3,{id:"d\xe9veloppez-\xe0-distance-avec-ssh-dans-vs-code",children:"D\xe9veloppez \xe0 distance avec SSH dans VS Code"}),"\n",(0,r.jsxs)(s.p,{children:['En utilisant la fonctionnalit\xe9 SSH de VS Code, vous pouvez d\xe9velopper votre code sur un serveur distant plut\xf4t que sur votre machine locale. Vous allez utiliser cette fonctionnalit\xe9 pour vous connecter au dossier "ansible-projects" que vous avez cr\xe9\xe9 sur le ',(0,r.jsx)(s.code,{children:"nodemanager"}),", \xe9crire les scripts et ex\xe9cuter directement les commandes Ansible depuis votre machine locale."]}),"\n",(0,r.jsxs)(s.ol,{children:["\n",(0,r.jsxs)(s.li,{children:[(0,r.jsx)(s.a,{href:"https://code.visualstudio.com/download",children:"T\xe9l\xe9chargez"})," et installez VS Code dans votre machine local."]}),"\n",(0,r.jsx)(s.li,{children:'Installez l\'extension "Remote - SSH"'}),"\n",(0,r.jsx)(s.li,{children:'Cliquez sur "Remote Expolorer", puis sur le bouton "+" pour ajouter une nouvelle connexion ssh :'}),"\n"]}),"\n",(0,r.jsx)(s.p,{children:(0,r.jsx)(s.img,{alt:"image-20240111205709313",src:n(445).Z+"",width:"394",height:"414"})}),"\n",(0,r.jsxs)(s.ol,{start:"4",children:["\n",(0,r.jsxs)(s.li,{children:["Entrez l'adresse SSH du serveur ",(0,r.jsx)(s.code,{children:"nodemanager"}),', utilisez l\'utilisateur que vous avez cr\xe9\xe9 "user-ansible" :']}),"\n"]}),"\n",(0,r.jsx)(s.p,{children:(0,r.jsx)(s.img,{alt:"image-20240111210034061",src:n(7182).Z+"",width:"606",height:"87"})}),"\n",(0,r.jsxs)(s.ol,{start:"5",children:["\n",(0,r.jsx)(s.li,{children:"Choisissez l'emplacement de votre fichier de configuration SSH. VS Code l'utilise pour sauvegarder les informations du serveur, vous permettant ainsi de reprendre automatiquement votre session ult\xe9rieurement."}),"\n"]}),"\n",(0,r.jsx)(s.p,{children:(0,r.jsx)(s.img,{alt:"image-20240111210525558",src:n(3802).Z+"",width:"610",height:"165"})}),"\n",(0,r.jsxs)(s.ol,{start:"6",children:["\n",(0,r.jsx)(s.li,{children:'Cliquez sur la petite ic\xf4ne verte en bas \xe0 droite, puis s\xe9lectionnez "Connect to Host" et choisissez l\'h\xf4te que vous venez de configurer. Ensuite, saisissez le mot de passe de l\'utilisateur "user-ansible".'}),"\n"]}),"\n",(0,r.jsx)(s.p,{children:(0,r.jsx)(s.img,{alt:"image-20240111211230093",src:n(7621).Z+"",width:"609",height:"139"})}),"\n",(0,r.jsxs)(s.ol,{start:"7",children:["\n",(0,r.jsxs)(s.li,{children:['Dans l\'explorateur de fichiers dans la barre lat\xe9rale, cliquez sur "open folder" et saisissez le chemin de votre dossier de travail : ',(0,r.jsx)(s.code,{children:"/home/user-ansible/ansible-projects"})]}),"\n"]}),"\n",(0,r.jsx)(s.p,{children:(0,r.jsx)(s.img,{alt:"image-20240111211727770",src:n(7338).Z+"",width:"534",height:"158"})}),"\n",(0,r.jsx)(s.p,{children:'Vous pouvez maintenant travailler directement sur le dossier "ansible-projects", vous pouvez aussi ouvrir le terminal de votre session SSH o\xf9 vous pouvez lancer les commandes Ansible !'}),"\n",(0,r.jsx)(s.p,{children:(0,r.jsx)(s.img,{alt:"image-20240111212752044",src:n(2893).Z+"",width:"885",height:"353"})}),"\n",(0,r.jsx)(s.h2,{id:"ansible-inventory-linventaire-des-nodes",children:"Ansible Inventory (l'inventaire des nodes)"}),"\n",(0,r.jsx)(s.p,{children:"Pour fonctionner, Ansible a besoin d'un fichier d'inventaire. Ce fichier contient la liste des nodes et de leurs variables, d\xe9crivant simplement votre infrastructure, c'est-\xe0-dire les serveurs sur lesquels les t\xe2ches Ansible seront ex\xe9cut\xe9es."}),"\n",(0,r.jsx)(s.p,{children:"Il est possible de d\xe9finir le fichier d'inventaire Ansible de trois mani\xe8res diff\xe9rentes :"}),"\n",(0,r.jsxs)(s.ul,{children:["\n",(0,r.jsx)(s.li,{children:"Format INI statique."}),"\n",(0,r.jsx)(s.li,{children:"Format YAML statique."}),"\n",(0,r.jsx)(s.li,{children:"Format JSON (de mani\xe8re dynamique)."}),"\n"]}),"\n",(0,r.jsxs)(s.blockquote,{children:["\n",(0,r.jsx)(s.p,{children:"Remarque : Les deux premi\xe8res m\xe9thodes statiques (INI et YAML) sont g\xe9n\xe9ralement recommand\xe9es lorsque vous travaillez avec des serveurs physiques dont la configuration est relativement stable. En revanche, le script dynamique est souvent pr\xe9f\xe9r\xe9 pour lister les serveurs virtuels cr\xe9\xe9s dans un environnement cloud, o\xf9 la cr\xe9ation, la suppression et la modification de machines virtuelles peuvent \xeatre fr\xe9quentes et dynamiques."}),"\n"]}),"\n",(0,r.jsxs)(s.p,{children:["Par d\xe9faut, Ansible recherche le fichier d'inventaire dans le chemin ",(0,r.jsx)(s.code,{children:"/etc/ansible/hosts"}),". Ce chemin est pr\xe9configur\xe9 dans ",(0,r.jsx)(s.code,{children:"/etc/ansible/ansible.cfg"}),". Cependant, vous pouvez sp\xe9cifier un emplacement diff\xe9rent pour votre fichier d'inventaire en utilisant l'option ",(0,r.jsx)(s.code,{children:"-i"})," lors de l'ex\xe9cution des commandes Ansible."]}),"\n",(0,r.jsx)(s.h2,{id:"cr\xe9ez-le-fichier-inventaire-ansible",children:"Cr\xe9ez le fichier inventaire Ansible"}),"\n",(0,r.jsxs)(s.p,{children:["Cr\xe9ez un sous dossier nomm\xe9 par exemple ",(0,r.jsx)(s.code,{children:"devops-ansible-deployment"})," dirctement depuis VS Code ou bien avec le terminal :"]}),"\n",(0,r.jsx)(s.pre,{children:(0,r.jsx)(s.code,{className:"language-bash",children:"[user-ansible@nodemanager ansible-projects]$ ls\r\ndevops-ansible-deployment\r\n[user-ansible@nodemanager ansible-projects]$ cd devops-ansible-deployment/\r\n[user-ansible@nodemanager devops-ansible-deployment]$\n"})}),"\n",(0,r.jsxs)(s.p,{children:["Cr\xe9ez un fichier ",(0,r.jsx)(s.code,{children:"00_inventory.ini"}),", puis ajoutez la d\xe9finition de deux serveurs ",(0,r.jsx)(s.code,{children:"prodserver"})," et ",(0,r.jsx)(s.code,{children:"testserver"})," :"]}),"\n",(0,r.jsx)(s.pre,{children:(0,r.jsx)(s.code,{className:"language-bash",children:"[user-ansible@nodemanager devops-ansible-deployment]$ cat 00_inventory.ini\r\nprodserver ansible_host=192.168.1.66 ansible_user=root ansible_ssh_pass=123321\r\ntestserver ansible_host=192.168.1.26 ansible_user=root ansible_ssh_pass=123321\n"})}),"\n",(0,r.jsxs)(s.p,{children:[(0,r.jsx)(s.code,{children:"ansible_host"})," indique l'adresse IP du serveur. Dans l\u2019absolu, il est recommand\xe9 d'utiliser ",(0,r.jsx)(s.strong,{children:"les noms de machine plut\xf4t que les adresses IP"}),". Les noms de machine devraient toujours \xeatre enregistr\xe9s dans un serveur DNS. Cependant, pour cette section qui se concentre sur la pratique d'Ansible, vous pouvez utiliser les adresses IP, ou bien les enregistrer dans le fichier ",(0,r.jsx)(s.code,{children:"/etc/hosts"})," comme nous l'avons fait pour le serveur ",(0,r.jsx)(s.code,{children:"mastererver"}),"."]}),"\n",(0,r.jsxs)(s.p,{children:[(0,r.jsx)(s.code,{children:"ansible_user"})," et ",(0,r.jsx)(s.code,{children:"ansible_ssh_pass"})," permettent de d\xe9finir l'utilisateur \xe0 utiliser pour se connecter en SSH ainsi que le mot de passe. Les variables de connexion ne sont pas obligatoires ; vous pouvez les passer directement en ligne de commande lors de l'ex\xe9cution des commandes Ansible :"]}),"\n",(0,r.jsxs)(s.ul,{children:["\n",(0,r.jsx)(s.li,{children:(0,r.jsx)(s.code,{children:"--user UTILISATEUR_A_UTILISER"})}),"\n",(0,r.jsxs)(s.li,{children:[(0,r.jsx)(s.code,{children:"--ask-pass"})," ou ",(0,r.jsx)(s.code,{children:"-k"})," (k minuscule) : indique \xe0 Ansible de demander le mot de passe SSH"]}),"\n"]}),"\n",(0,r.jsxs)(s.blockquote,{children:["\n",(0,r.jsxs)(s.p,{children:["Remarque : Si vous ne sp\xe9cifiez pas d'utilisateur, Ansible utilise l'utilisateur courant, dans votre cas ",(0,r.jsx)(s.code,{children:"user-ansible"}),". Pour le moment, nous allons utiliser ",(0,r.jsx)(s.code,{children:"root"})," (nous n'avons pas d'autre choix, c'est le seul compte dont nous disposons)."]}),"\n"]}),"\n",(0,r.jsx)(s.h2,{id:"type-dinstances-dans-linventaire-dansible",children:"Type d'instances dans l'inventaire d'Ansible"}),"\n",(0,r.jsx)(s.p,{children:"Dans le fichier inventaire d'Ansible, vous pouvez d\xe9finir deux types d'instances : les h\xf4tes (hosts) et les groupes (groupes)."}),"\n",(0,r.jsxs)(s.ul,{children:["\n",(0,r.jsxs)(s.li,{children:["Les hosts sont les machines \xe0 l'\xe9chelle individuelle tel que ",(0,r.jsx)(s.code,{children:"prodserver"}),", ",(0,r.jsx)(s.code,{children:"testserver"}),"."]}),"\n",(0,r.jsxs)(s.li,{children:["Les groupes vous permettent de regrouper plusieurs h\xf4tes sous un m\xeame nom, exemple ",(0,r.jsx)(s.code,{children:"dbserver"}),", ",(0,r.jsx)(s.code,{children:"webserver"}),"."]}),"\n"]}),"\n",(0,r.jsxs)(s.p,{children:["Par exemple si vous voulez organiser vos serveurs en deux groupes ",(0,r.jsx)(s.code,{children:"production"})," et ",(0,r.jsx)(s.code,{children:"staging"})," :"]}),"\n",(0,r.jsx)(s.pre,{children:(0,r.jsx)(s.code,{children:"[production]\r\nprodserver ansible_host=192.168.1.66 ansible_user=root ansible_ssh_pass=123321\r\n\r\n[staging]\r\ntestserver ansible_host=192.168.1.26 ansible_user=root ansible_ssh_pass=123321\n"})}),"\n",(0,r.jsxs)(s.p,{children:["Le but est de pouvoir cibler les t\xe2ches \xe0 ex\xe9cuter avec Ansible pour un groupe ou un h\xf4te sp\xe9cifique, ou bien pour toutes les machines \xe0 travers le groupe ",(0,r.jsx)(s.code,{children:"all"}),"."]}),"\n",(0,r.jsxs)(s.p,{children:["Le groupe par d\xe9faut est ",(0,r.jsx)(s.code,{children:"all"}),", ce qui signifie que vous vous adressez \xe0 toutes les machines. En format INI, vous n'\xeates pas oblig\xe9 de sp\xe9cifier explicitement ce groupe."]}),"\n",(0,r.jsxs)(s.p,{children:["Modifiez votre fichier ",(0,r.jsx)(s.code,{children:"00_inventory.ini"}),' pour ajouter les deux groupes, "production" et "staging". Cela nous permettra de cibler :']}),"\n",(0,r.jsxs)(s.ul,{children:["\n",(0,r.jsxs)(s.li,{children:["Le serveur ",(0,r.jsx)(s.code,{children:"prodserver"})]}),"\n",(0,r.jsxs)(s.li,{children:["Tous les serveurs du groupe ",(0,r.jsx)(s.code,{children:"production"})]}),"\n",(0,r.jsxs)(s.li,{children:["Le serveur ",(0,r.jsx)(s.code,{children:"testserver"})]}),"\n",(0,r.jsxs)(s.li,{children:["Tous les serveurs du groupe ",(0,r.jsx)(s.code,{children:"staging"})]}),"\n",(0,r.jsxs)(s.li,{children:["Tous les serveurs avec le groupe ",(0,r.jsx)(s.code,{children:"all"})]}),"\n"]}),"\n",(0,r.jsx)(s.p,{children:"Nous explorerons ces \xe9l\xe9ments en pratique par la suite."}),"\n",(0,r.jsx)(s.h2,{id:"les-modules",children:"Les modules"}),"\n",(0,r.jsxs)(s.p,{children:["Un module Ansible est un programme utilis\xe9 pour ex\xe9cuter une t\xe2che ou une commande sp\xe9cifique. Chaque t\xe2che dans Ansible est associ\xe9e \xe0 un module unique qui d\xe9finit la fonction \xe0 accomplir. Ces modules peuvent prendre des arguments, ce qui permet une personnalisation de l'ex\xe9cution de la t\xe2che en fonction des besoins sp\xe9cifiques. Vous pouvez trouver la liste des modules dans la ",(0,r.jsx)(s.a,{href:"https://docs.ansible.com/ansible/2.9/modules/list_of_all_modules.html",children:"documentation officielle"}),", ou bien via les commandes ",(0,r.jsx)(s.code,{children:"ansible-doc -l"})," et ",(0,r.jsx)(s.code,{children:"ansible-doc <module>"})," pour obtenir les d\xe9tails sp\xe9cifiques de chaque module."]}),"\n",(0,r.jsxs)(s.p,{children:["Les t\xe2ches peuvent \xeatre lanc\xe9es \xe0 l'aide des deux commandes suivantes : ",(0,r.jsx)(s.code,{children:"ansible"})," et ",(0,r.jsx)(s.code,{children:"ansible-playbook"}),", que vous utiliserez par la suite."]}),"\n",(0,r.jsx)(s.h2,{id:"v\xe9rifiez-la-communication-avec-les-nodes",children:"V\xe9rifiez la communication avec les nodes"}),"\n",(0,r.jsxs)(s.p,{children:["Vous allez utiliser le module ",(0,r.jsx)(s.code,{children:"ping"})," pour tester l'accessibilit\xe9 des deux serveurs, ",(0,r.jsx)(s.code,{children:"prodserver"})," et ",(0,r.jsx)(s.code,{children:"testserver"}),", que vous avez d\xe9finis dans le fichier d'inventaire via Ansible."]}),"\n",(0,r.jsx)(s.h3,{id:"utilisez-ansible-en-mode-imp\xe9ratif-ad-hoc-avec-la-commande-ansible",children:"Utilisez Ansible en mode imp\xe9ratif (ad-hoc) avec la commande Ansible"}),"\n",(0,r.jsxs)(s.p,{children:["Ansible offre la commande ",(0,r.jsx)(s.code,{children:"ansible"})," pour ex\xe9cuter des commandes en mode ad-hoc (imp\xe9ratif). Ce mode permet d'ex\xe9cuter des commandes s\xe9par\xe9es afin d'effectuer des actions sp\xe9cifiques sur les serveurs cibles. Il est principalement utilis\xe9 dans des environnements de d\xe9veloppement pour effectuer des tests ou pour se familiariser avec de nouveaux modules ou bien en production pour ex\xe9cuter des t\xe2ches non r\xe9p\xe9titives."]}),"\n",(0,r.jsx)(s.p,{children:"La structure g\xe9n\xe9rale de la commande ad-hoc est la suivante :"}),"\n",(0,r.jsx)(s.pre,{children:(0,r.jsx)(s.code,{className:"language-bash",children:"ansible <PATTERN> -i <INVENTORY> -m <MODULE_NAME> -a <MODULE_ARGS> -b\n"})}),"\n",(0,r.jsxs)(s.p,{children:["L'argument ",(0,r.jsx)(s.code,{children:"<PATTERN>"})," permet de sp\xe9cifier le nom du serveur ou du groupe de serveurs sur lequel la t\xe2che sera ex\xe9cut\xe9e. Exemple ",(0,r.jsx)(s.code,{children:"all"}),", ",(0,r.jsx)(s.code,{children:"prodserver"}),", ",(0,r.jsx)(s.code,{children:"staging"})]}),"\n",(0,r.jsxs)(s.ul,{children:["\n",(0,r.jsxs)(s.li,{children:[(0,r.jsx)(s.code,{children:"-i"})," ou ",(0,r.jsx)(s.code,{children:"--inventory"})," : sp\xe9cifie le chemin vers le fichier d'inventaire,"]}),"\n",(0,r.jsxs)(s.li,{children:[(0,r.jsx)(s.code,{children:"-m"})," ou ",(0,r.jsx)(s.code,{children:"--module-name"})," : indique le nom du module Ansible,"]}),"\n",(0,r.jsxs)(s.li,{children:[(0,r.jsx)(s.code,{children:"-a"})," ou ",(0,r.jsx)(s.code,{children:"--args"})," : repr\xe9sente l'ensemble des arguments \xe0 passer au module,"]}),"\n",(0,r.jsxs)(s.li,{children:[(0,r.jsx)(s.code,{children:"-b"})," ou ",(0,r.jsx)(s.code,{children:"--become"})," : certains modules n\xe9cessitent l'\xe9l\xe9vation des privil\xe8ges (sudo) pour \xeatre ex\xe9cut\xe9s."]}),"\n"]}),"\n",(0,r.jsxs)(s.p,{children:["Testez le module ping sur le serveur ",(0,r.jsx)(s.code,{children:"test"})," avec la commande ",(0,r.jsx)(s.code,{children:"ansible testserver -m ping -i 00_inventory.ini"}),":"]}),"\n",(0,r.jsx)(s.pre,{children:(0,r.jsx)(s.code,{className:"language-bash",children:'[user-ansible@nodemanager devops-ansible-deployment]$ ansible testserver -m ping -i 00_inventory.ini\r\ntestserver | FAILED! => {\r\n    "msg": "Using a SSH password instead of a key is not possible because Host Key checking is enabled and sshpass does not support this.  Please add this host\'s fingerprint to your known_hosts file to manage this host."\r\n}\n'})}),"\n",(0,r.jsxs)(s.p,{children:["Le statut est ",(0,r.jsx)(s.code,{children:"FAILED"})," ! Ansible n'arrive pas \xe0 se connecter via SSH."]}),"\n",(0,r.jsxs)(s.p,{children:["Quand vous vous connectez la premi\xe8re fois en SSH avec un serveur, il peut \xeatre n\xe9cessaire d'accepter et d'enregistrer la ",(0,r.jsx)(s.strong,{children:"fingerprint"})," dans le fichier ",(0,r.jsx)(s.code,{children:"known_hosts"}),". Par la suite, cette v\xe9rification sera automatiquement effectu\xe9e lors des connexions ult\xe9rieures."]}),"\n",(0,r.jsxs)(s.p,{children:["Vous pouvez d\xe9sactiver cette v\xe9rification dans la configuration d'Ansible. Cela est d\xe9taill\xe9 dans la ",(0,r.jsx)(s.a,{href:"https://docs.ansible.com/ansible/latest/inventory_guide/connection_details.html#managing-host-key-checking",children:"documentation officielle"}),", mais je vous recommande de vous connecter manuellement aux serveurs ",(0,r.jsx)(s.code,{children:"prodserver"})," et ",(0,r.jsx)(s.code,{children:"testserver"})," pour enregistrer la ",(0,r.jsx)(s.strong,{children:"fingerprint"})," :"]}),"\n",(0,r.jsx)(s.pre,{children:(0,r.jsx)(s.code,{className:"language-bash",children:"[user-ansible@nodemanager devops-ansible-deployment]$ ssh root@192.168.1.26\r\nThe authenticity of host '192.168.1.26 (192.168.1.26)' can't be established.\r\nECDSA key fingerprint is SHA256:Nnd1qW32K8lOp94/sAqfDgrkqcY+9Z9KFuLSc1tbmJk.\r\nECDSA key fingerprint is MD5:c5:79:3b:ed:a6:04:f9:62:4d:86:a6:48:dc:78:e1:89.\r\nAre you sure you want to continue connecting (yes/no)? yes\r\nWarning: Permanently added '192.168.1.26' (ECDSA) to the list of known hosts.\r\nroot@192.168.1.26's password:\r\nLast login: Fri Dec 22 03:28:03 2023 from 192.168.1.196\r\n[root@testserver ~]# exit\r\nd\xe9connexion\r\nConnection to 192.168.1.26 closed.\n"})}),"\n",(0,r.jsxs)(s.p,{children:["Relancez la commande ansible. cette fois vous devez voir ",(0,r.jsx)(s.code,{children:"SUCCESS"})," :"]}),"\n",(0,r.jsx)(s.pre,{children:(0,r.jsx)(s.code,{className:"language-bash",children:'[user-ansible@nodemanager devops-ansible-deployment]$ ansible testserver -m ping -i 00_inventory.ini\r\nprodserver | SUCCESS => {\r\n    "ansible_facts": {\r\n        "discovered_interpreter_python": "/usr/bin/python"\r\n    },\r\n    "changed": false,\r\n    "ping": "pong"\r\n}\n'})}),"\n",(0,r.jsx)(s.p,{children:"Testez la commande pour cibler les h\xf4tes ou les groupes :"}),"\n",(0,r.jsx)(s.pre,{children:(0,r.jsx)(s.code,{className:"language-bash",children:'[user-ansible@nodemanager devops-ansible-deployment]$ ansible prodserver -m ping -i 00_inventory.ini\r\nprodserver | SUCCESS => {\r\n    "ansible_facts": {\r\n        "discovered_interpreter_python": "/usr/bin/python"\r\n    }, \r\n    "changed": false, \r\n    "ping": "pong"\r\n}\r\n[user-ansible@nodemanager devops-ansible-deployment]$ ansible all -m ping -i 00_inventory.ini\r\nprodserver | SUCCESS => {\r\n    "ansible_facts": {\r\n        "discovered_interpreter_python": "/usr/bin/python"\r\n    }, \r\n    "changed": false, \r\n    "ping": "pong"\r\n}\r\ntestserver | SUCCESS => {\r\n    "ansible_facts": {\r\n        "discovered_interpreter_python": "/usr/bin/python"\r\n    }, \r\n    "changed": false, \r\n    "ping": "pong"\r\n}\r\n[user-ansible@nodemanager devops-ansible-deployment]$ ansible production -m ping -i 00_inventory.ini\r\nprodserver | SUCCESS => {\r\n    "ansible_facts": {\r\n        "discovered_interpreter_python": "/usr/bin/python"\r\n    }, \r\n    "changed": false, \r\n    "ping": "pong"\r\n}\n'})}),"\n",(0,r.jsx)(s.h3,{id:"utilisez-ansible-en-mode-d\xe9claratif-ansible-playbook",children:"Utilisez Ansible en mode d\xe9claratif (ansible-playbook)"}),"\n",(0,r.jsxs)(s.p,{children:["Un playbook Ansible est une s\xe9quence d'instructions ou jeux d'instruction en anglais ",(0,r.jsx)(s.code,{children:"play"})," d\xe9finies dans un fichier YAML. Il sp\xe9cifie un ensemble de t\xe2ches \xe0 effectuer sur un groupe de serveurs cibl\xe9s. Lorsque vous ex\xe9cutez un playbook Ansible, les ",(0,r.jsx)(s.code,{children:"play"})," sont ex\xe9cut\xe9s dans l'ordre indiqu\xe9, de haut en bas, et les t\xe2ches de chaque ",(0,r.jsx)(s.code,{children:"play"})," sont \xe9galement ex\xe9cut\xe9es dans cet ordre. C'est un moyen puissant et d\xe9claratif d'automatiser la gestion de configuration et le d\xe9ploiement sur plusieurs serveurs."]}),"\n",(0,r.jsx)(s.p,{children:"Compar\xe9 au mode ad-hoc, les playbooks vous offrent la possibilit\xe9 de conserver le code dans un fichier YAML et de le r\xe9utiliser \xe0 chaque fois. Par exemple, nous allons cr\xe9er un playbook pour d\xe9ployer notre application Spring Boot \xe0 chaque lancement de build dans la pipeline CI/CD que nous allons cr\xe9er \xe0 la fin de ce cours."}),"\n",(0,r.jsxs)(s.p,{children:["Si vous n'\xeates pas familier avec le format YAML, prenez une petite pause pour comprendre sa syntaxe sur la ",(0,r.jsx)(s.a,{href:"https://docs.ansible.com/ansible/latest/reference_appendices/YAMLSyntax.html#yaml-syntax",children:"documentation officielle"})," d'Ansible par exemple."]}),"\n",(0,r.jsx)(s.h3,{id:"la-structure-dun-playbook",children:"La structure d'un playbook"}),"\n",(0,r.jsx)(s.p,{children:"La structure minimale pour un playbook Ansible est la suivante :"}),"\n",(0,r.jsxs)(s.ol,{children:["\n",(0,r.jsx)(s.li,{children:"Un bloc g\xe9n\xe9ral, pouvant comporter un nom pour le playbook, les h\xf4tes ou groupes concern\xe9s, des variables, des options, etc."}),"\n",(0,r.jsxs)(s.li,{children:["Ensuite, des blocs sp\xe9cifiques tels que des ",(0,r.jsx)(s.strong,{children:"tasks"}),", des ",(0,r.jsx)(s.strong,{children:"r\xf4les"})," et des ",(0,r.jsx)(s.strong,{children:"handlers"}),"."]}),"\n"]}),"\n",(0,r.jsxs)(s.p,{children:["Chaque ligne \xe0 l'int\xe9rieur de ces blocs est indent\xe9e de ",(0,r.jsx)(s.strong,{children:"deux espaces"})," pour indiquer la hi\xe9rarchie des \xe9l\xe9ments dans le fichier YAML."]}),"\n",(0,r.jsx)(s.pre,{children:(0,r.jsx)(s.code,{className:"language-yaml",children:"- name: Nom du playbook\r\n  hosts: groupe_hotes_cibles\r\n  become: true  # Option : Indique que les t\xe2ches doivent \xeatre ex\xe9cut\xe9es en tant qu'utilisateur sudo (root)\r\n\r\n  vars:\r\n    variable1: valeur1\r\n    variable2: valeur2\r\n\r\n  tasks:\r\n    - name: T\xe2che 1\r\n      module_name:\r\n        parametre1: valeur1\r\n        parametre2: valeur2\r\n\r\n    - name: T\xe2che 2\r\n      autre_module:\r\n        parametre1: valeur1\r\n        parametre2: valeur2\n"})}),"\n",(0,r.jsx)(s.p,{children:"Vous allez cr\xe9er un playbook pour tester la communication avec les n\u0153uds, donc vous allez utiliser le m\xeame module 'ping' que celui que vous avez utilis\xe9 avec le mode ad-hoc."}),"\n",(0,r.jsxs)(s.p,{children:["Dans le m\xeame dossier ",(0,r.jsx)(s.code,{children:"devops-ansible-deployment"})," cr\xe9ez le fichier ",(0,r.jsx)(s.code,{children:"my-first-playbook.yml"})]}),"\n",(0,r.jsx)(s.p,{children:(0,r.jsx)(s.img,{alt:"image-20240112140055518",src:n(7151).Z+"",width:"509",height:"162"})}),"\n",(0,r.jsxs)(s.p,{children:["Ici, tous les groupes sont concern\xe9s. Vous avez une seule t\xe2che, 'Test de ping', qui utilise le module ",(0,r.jsx)(s.code,{children:"ping"}),"."]}),"\n",(0,r.jsxs)(s.p,{children:["Lancez le playbook avec la commande ",(0,r.jsx)(s.code,{children:"ansible-playbook"}),", suivi du nom du playbook et de l'option ",(0,r.jsx)(s.code,{children:"-i inventory.ini"})," pour sp\xe9cifier le chemin du fichier d'inventaire :"]}),"\n",(0,r.jsx)(s.pre,{children:(0,r.jsx)(s.code,{className:"language-bash",children:"[user-ansible@nodemanager devops-ansible-deployment]$ ansible-playbook my-first-playbook.yaml -i inventory.ini\r\n\r\nPLAY [Test de connectivit\xe9 avec les serveurs cibles] ****************************************************************************************************************************************************************\r\n\r\nTASK [Gathering Facts] **********************************************************************************************************************************************************************************************\r\nok: [prodserver]\r\nok: [testserver]\r\n\r\nTASK [Test de ping] *************************************************************************************************************************************************************************************************\r\nok: [testserver]\r\nok: [prodserver]\r\n\r\nPLAY RECAP **********************************************************************************************************************************************************************************************************\r\nprodserver                 : ok=2    changed=0    unreachable=0    failed=0    skipped=0    rescued=0    ignored=0   \r\ntestserver                 : ok=2    changed=0    unreachable=0    failed=0    skipped=0    rescued=0    ignored=0   \n"})}),"\n",(0,r.jsx)(s.p,{children:"Vous pouvez constater qu'Ansible affiche la liste des t\xe2ches ex\xe9cut\xe9es avec leur \xe9tat (ok, changed, unreachable, failed)."}),"\n",(0,r.jsx)(s.p,{children:"La t\xe2che 'Gathering Facts' est automatiquement lanc\xe9e par Ansible. Elle permet de collecter plusieurs variables sur chaque n\u0153ud (adresse IP, version de l\u2019OS, etc.). Ces variables peuvent ensuite \xeatre utilis\xe9es dans les scripts."}),"\n",(0,r.jsx)(s.h2,{id:"utilisez-lextension-vs-code-ansible",children:"Utilisez l'extension VS Code Ansible"}),"\n",(0,r.jsxs)(s.p,{children:["L'avantage d'utiliser une IDE comme VS Code pour \xe9crire les playbooks \xe0 distance, au lieu d'un simple \xe9diteur de texte, est de profiter de l'extension Ansible maintenue par ",(0,r.jsx)(s.code,{children:"Red Hat"}),". Elle offre :"]}),"\n",(0,r.jsxs)(s.ul,{children:["\n",(0,r.jsx)(s.li,{children:"La coloration syntaxique"}),"\n",(0,r.jsx)(s.li,{children:"L'auto-compl\xe9tion des noms de modules et des options via le raccourci [CTRL] + [Espace]"}),"\n",(0,r.jsxs)(s.li,{children:["La validation du code avec ",(0,r.jsx)(s.code,{children:"ansible-lint"})]}),"\n"]}),"\n",(0,r.jsx)(s.p,{children:"Installez l'extension depuis 'File' > 'Settings' > 'Extensions', puis cliquer sur configurer :"}),"\n",(0,r.jsx)(s.p,{children:(0,r.jsx)(s.img,{alt:"image-20240112214136155",src:n(9135).Z+"",width:"596",height:"197"})}),"\n",(0,r.jsxs)(s.p,{children:["\xc9tant donn\xe9 que vous \xeates connect\xe9 en SSH au serveur ",(0,r.jsx)(s.code,{children:"nodeserver"}),", vous avez la possibilit\xe9 de configurer l'extension pour le serveur distant. Ajoutez le chemin vers Ansible et Python 3. Pour conna\xeetre ces chemins, vous pouvez utiliser les commandes ",(0,r.jsx)(s.code,{children:"which ansible"})," et ",(0,r.jsx)(s.code,{children:"which python3"})," depuis votre terminal."]}),"\n",(0,r.jsx)(s.p,{children:(0,r.jsx)(s.img,{alt:"image-20240112212928589",src:n(6879).Z+"",width:"1189",height:"628"})}),"\n",(0,r.jsxs)(s.p,{children:[(0,r.jsx)(s.code,{children:"ansible-lint"})," est un outil open source destin\xe9 \xe0 l'analyse statique des playbooks Ansible. Il v\xe9rifie la conformit\xe9 de vos playbooks avec les meilleures pratiques recommand\xe9es par la communaut\xe9 Ansible et identifie d'\xe9ventuelles erreurs ou probl\xe8mes potentiels. Vous pouvez \xe9galement configurer son chemin ; par d\xe9faut, il est activ\xe9. Si vous d\xe9butez avec Ansible, je vous recommande de commencer par \xe9crire des playbooks sans utiliser ",(0,r.jsx)(s.code,{children:"ansible-lint"})," afin de vous familiariser avec la syntaxe et les concepts d'Ansible."]}),"\n",(0,r.jsx)(s.p,{children:(0,r.jsx)(s.img,{alt:"image-20240112213049046",src:n(4754).Z+"",width:"1184",height:"424"})}),"\n",(0,r.jsx)(s.h2,{id:"passez-au-format-yaml-avec-le-fichier-dinventaire",children:"Passez au format YAML avec le fichier d'inventaire"}),"\n",(0,r.jsxs)(s.p,{children:["Souvent, le format YAML est pr\xe9f\xe9r\xe9 pour le fichier d'inventaire, car il offre une meilleure lisibilit\xe9 de l'organisation de vos n\u0153uds. De plus, tous les autres fichiers d'Ansible sont \xe9crits en YAML. Dans mon cas, je pr\xe9f\xe8re \xe9galement utiliser le format YAML pour l'inventaire. Dans cette section, vous allez modifier votre fichier ",(0,r.jsx)(s.code,{children:"00_inventory.ini"})," en ",(0,r.jsx)(s.code,{children:"00_inventory.yaml"}),". C'est l'occasion de travailler avec les deux types de fichiers !"]}),"\n",(0,r.jsx)(s.pre,{children:(0,r.jsx)(s.code,{className:"language-yaml",children:"all:\r\n  children:\r\n    production:\r\n      hosts:\r\n        prodserver:\r\n          ansible_host: 192.168.1.66\r\n          ansible_user: root\r\n          ansible_ssh_pass: 123321\r\n    staging:\r\n      hosts:\r\n        testserver:\r\n          ansible_host: 192.168.1.26\r\n          ansible_user: root\r\n          ansible_ssh_pass: 123321\n"})}),"\n",(0,r.jsx)(s.p,{children:"Voici la structure du fichier d'inventaire au format YAML :"}),"\n",(0,r.jsxs)(s.p,{children:["Le groupe ",(0,r.jsx)(s.code,{children:"all"})," englobe tous les h\xf4tes. (il doit \xeatre d\xe9fini explicitement avec le format YAML)."]}),"\n",(0,r.jsxs)(s.p,{children:["Ensuite, les groupes enfants (",(0,r.jsx)(s.code,{children:"children"}),") englobent les deux sous-groupes ",(0,r.jsx)(s.code,{children:"production"})," et ",(0,r.jsx)(s.code,{children:"staging"}),"."]}),"\n",(0,r.jsxs)(s.p,{children:["Chaque groupe d\xe9finit une liste de ",(0,r.jsx)(s.code,{children:"hosts"}),"."]}),"\n",(0,r.jsx)(s.h2,{id:"les-variables-en-ansible",children:"Les variables en Ansible"}),"\n",(0,r.jsx)(s.p,{children:"Les variables rendent les playbooks plus flexibles et adaptables. Ansible remplace la variable par sa valeur lorsqu'une t\xe2che est ex\xe9cut\xe9e."}),"\n",(0,r.jsxs)(s.p,{children:["Il existe au total une vingtaine de m\xe9thodes diff\xe9rentes pour d\xe9finir une variable dans Ansible. Elles sont trait\xe9es selon un ordre de priorit\xe9 (",(0,r.jsx)(s.a,{href:"https://docs.ansible.com/ansible/latest/user_guide/playbooks_variables.html#understanding-variable-precedence",children:"consultez la documentation officielle sur les priorit\xe9s des variables Ansible"}),")."]}),"\n",(0,r.jsx)(s.p,{children:"Voici quelques exemples de fa\xe7ons de d\xe9finir une variable :"}),"\n",(0,r.jsxs)(s.ul,{children:["\n",(0,r.jsxs)(s.li,{children:["Dans l'inventaire avec ",(0,r.jsx)(s.code,{children:"vars"}),"."]}),"\n",(0,r.jsxs)(s.li,{children:["Dans la section ",(0,r.jsx)(s.code,{children:"vars"})," d'un playbook."]}),"\n",(0,r.jsx)(s.li,{children:"Dans les dossiers group_vars et host_vars \xe0 la racine du projet \xe0 l'aide de fichiers YAML."}),"\n",(0,r.jsxs)(s.li,{children:["Au niveau de la commande ",(0,r.jsx)(s.code,{children:"ansible-playbook"})," avec l'argument ",(0,r.jsx)(s.code,{children:"-e"})," ou ",(0,r.jsx)(s.code,{children:"--extra-vars"}),"."]}),"\n"]}),"\n",(0,r.jsx)(s.p,{children:"Pour comprendre et pratiquer, faisons quelques exemples."}),"\n",(0,r.jsx)(s.h3,{id:"d\xe9finissez-les-variables-dans-le-fichier-dinventaire",children:"D\xe9finissez les variables dans le fichier d'inventaire"}),"\n",(0,r.jsxs)(s.p,{children:["Ajoutez dans la section ",(0,r.jsx)(s.code,{children:"vars"})," une variable nomm\xe9e ",(0,r.jsx)(s.code,{children:"var1"})," avec la valeur 'var1 from inventory' dans votre fichier ",(0,r.jsx)(s.code,{children:"00_inventory.yaml"})," :"]}),"\n",(0,r.jsx)(s.pre,{children:(0,r.jsx)(s.code,{className:"language-yaml",children:'all:\r\n  children:\r\n    production:\r\n      hosts:\r\n        prodserver:\r\n          ansible_host: 192.168.1.66\r\n          ansible_user: root\r\n          ansible_ssh_pass: 123321\r\n      vars:\r\n        var1: "var1 from inventory"\r\n    staging:\r\n      hosts:\r\n        testserver:\r\n          ansible_host: 192.168.1.26\r\n          ansible_user: root\r\n          ansible_ssh_pass: 123321\r\n      vars:\r\n        var1: "var1 from inventory"\n'})}),"\n",(0,r.jsxs)(s.p,{children:["Dans votre playbook ",(0,r.jsx)(s.code,{children:"my-first-playbook.yaml"}),", ajoutez une t\xe2che qui utilise le module ",(0,r.jsx)(s.code,{children:"debug"})," pour afficher la valeur de cette variable :"]}),"\n",(0,r.jsx)(s.pre,{children:(0,r.jsx)(s.code,{className:"language-yaml",children:'- name: Test de connectivit\xe9 avec les serveurs cibles\r\n  hosts: all\r\n  tasks:\r\n    - name: Test de ping\r\n      ping:\r\n    - name: Valeur de la variable var1\r\n      debug:\r\n        msg: "{{ var1 }}"\n'})}),"\n",(0,r.jsxs)(s.p,{children:["Ex\xe9cutez le playbook avec la commande ",(0,r.jsx)(s.code,{children:" ansible-playbook my-first-playbook.yaml -i 00_inventory.yml"})," :"]}),"\n",(0,r.jsx)(s.pre,{children:(0,r.jsx)(s.code,{className:"language-bash",children:'[user-ansible@nodemanager devops-ansible-deployment]$ ansible-playbook my-first-playbook.yaml -i 00_inventory.yml \r\n\r\nPLAY [Test de connectivit\xe9 avec les serveurs cibles] *****************************************************************************************************************\r\n\r\nTASK [Gathering Facts] ***********************************************************************************************************************************************\r\nok: [prodserver]\r\nok: [testserver]\r\n\r\nTASK [Test de ping] **************************************************************************************************************************************************\r\nok: [prodserver]\r\nok: [testserver]\r\n\r\nTASK [affichage] *****************************************************************************************************************************************************\r\nok: [prodserver] => {\r\n    "msg": "var1 from inventory"\r\n}\r\nok: [testserver] => {\r\n    "msg": "var1 from inventory"\r\n}\r\n\r\nPLAY RECAP ***********************************************************************************************************************************************************\r\nprodserver                 : ok=3    changed=0    unreachable=0    failed=0    skipped=0    rescued=0    ignored=0   \r\ntestserver                 : ok=3    changed=0    unreachable=0    failed=0    skipped=0    rescued=0    ignored=0   \n'})}),"\n",(0,r.jsx)(s.h3,{id:"d\xe9finissez-les-variables-dans-le-playbook",children:"D\xe9finissez les variables dans le playbook"}),"\n",(0,r.jsxs)(s.p,{children:["Maintenant, ajoutez la variable ",(0,r.jsx)(s.code,{children:"var1"})," dans le playbook :"]}),"\n",(0,r.jsx)(s.pre,{children:(0,r.jsx)(s.code,{className:"language-yaml",children:'- name: Test de connectivit\xe9 avec les serveurs cibles\r\n  hosts: all\r\n  vars:\r\n    var1: "var1 from playbook"\r\n  tasks:\r\n    - name: Test de ping\r\n      ping:\r\n    - name: Valeur de la variable var1\r\n      debug:\r\n        msg: "{{ var1 }}"\r\n\n'})}),"\n",(0,r.jsx)(s.p,{children:"Ex\xe9cutez le playbook avec la m\xeame commande. Vous pouvez constater que cette fois, la valeur affich\xe9e est 'var1 from playbook', indiquant ainsi que les variables d\xe9finies au niveau du playbook ont priorit\xe9 sur celles d\xe9finies dans l'inventaire."}),"\n",(0,r.jsx)(s.pre,{children:(0,r.jsx)(s.code,{className:"language-yaml",children:'TASK [Valeur de la variable var1] ************************************************************************************************************************************\r\nok: [prodserver] => {\r\n    "msg": "var1 from playbook"\r\n}\r\nok: [testserver] => {\r\n    "msg": "var1 from playbook"\r\n}\n'})}),"\n",(0,r.jsx)(s.h3,{id:"passez-les-variables-\xe0-partir-de-la-ligne-de-commande",children:"Passez les variables \xe0 partir de la ligne de commande"}),"\n",(0,r.jsxs)(s.p,{children:["L'ordre de priorit\xe9 le plus \xe9lev\xe9 se situe au niveau de la commande ",(0,r.jsx)(s.code,{children:"ansible-playbook"}),". Lancez la commande suivante pour effectuer le test :"]}),"\n",(0,r.jsx)(s.pre,{children:(0,r.jsx)(s.code,{className:"language-bash",children:"ansible-playbook my-first-playbook.yaml -e \"var1='var1 from cmd'\"  -i 00_inventory.yml \n"})}),"\n",(0,r.jsx)(s.h3,{id:"structurez-vos-variables-avec-les-r\xe9pertoires-host_vars-et-group_vars",children:"Structurez vos variables avec les r\xe9pertoires host_vars et group_vars"}),"\n",(0,r.jsxs)(s.p,{children:["La pratique recommand\xe9e pour fournir des variables dans l'inventaire est de les d\xe9finir dans des fichiers situ\xe9s dans deux r\xe9pertoires distincts : ",(0,r.jsx)(s.code,{children:"host_vars"})," et ",(0,r.jsx)(s.code,{children:"group_vars"})," :"]}),"\n",(0,r.jsxs)(s.ul,{children:["\n",(0,r.jsxs)(s.li,{children:["host_vars : Ce r\xe9pertoire contient des fichiers YAML sp\xe9cifiques \xe0 chaque h\xf4te, par exemple ",(0,r.jsx)(s.code,{children:"prodserver.yml"})," ",(0,r.jsx)(s.code,{children:"testserver.yml"})]}),"\n",(0,r.jsxs)(s.li,{children:["group_vars :  Ce r\xe9pertoire contient des fichiers YAML sp\xe9cifiques \xe0 chaque groupe d'h\xf4tes, par exemple ",(0,r.jsx)(s.code,{children:"all.yml"})," ",(0,r.jsx)(s.code,{children:"production.yml"})," ",(0,r.jsx)(s.code,{children:"staging.yml"})]}),"\n"]}),"\n",(0,r.jsxs)(s.blockquote,{children:["\n",(0,r.jsxs)(s.p,{children:["Remarque : Le nom du fichier YAML dans les r\xe9pertoires ",(0,r.jsx)(s.code,{children:"host_vars"})," et ",(0,r.jsx)(s.code,{children:"group_vars"})," doit correspondre au nom de l'h\xf4te ou du groupe auquel les variables sont destin\xe9es. Cela permet \xe0 Ansible d'associer automatiquement les variables du fichier avec l'h\xf4te ou le groupe correspondant dans l'inventaire. Si non vous pouvez cr\xe9er un dossier portant le nom de l'h\xf4te, et \xe0 l'int\xe9rieur, vous pouvez choisir le nom que vous pr\xe9f\xe9rez pour votre fichier YAML de variables."]}),"\n"]}),"\n",(0,r.jsx)(s.p,{children:"Dans les fichiers YAML, les variables se d\xe9finissent de la mani\xe8re suivante :"}),"\n",(0,r.jsx)(s.pre,{children:(0,r.jsx)(s.code,{className:"language-yaml",children:"nom_variable: valeur_variable\n"})}),"\n",(0,r.jsx)(s.h2,{id:"cr\xe9ez-un-utilisateur-standard-et-d\xe9ployer-une-cl\xe9-ssh-sur-les-nodes",children:"Cr\xe9ez un utilisateur standard et d\xe9ployer une cl\xe9 SSH sur les nodes"}),"\n",(0,r.jsxs)(s.p,{children:["Vous allez suivre les bonnes pratiques en cr\xe9ant un ",(0,r.jsx)(s.strong,{children:"utilisateur standard"})," afin de ne pas travailler directement avec le compte ",(0,r.jsx)(s.strong,{children:"root"}),"."]}),"\n",(0,r.jsxs)(s.p,{children:["Pour le ",(0,r.jsx)(s.code,{children:"nodemanager"}),", nous avons cr\xe9\xe9 l'utilisateur ",(0,r.jsx)(s.code,{children:"user-ansible"}),". Jusqu'\xe0 pr\xe9sent, nous avons utilis\xe9 le compte root pour nous connecter aux n\u0153uds, mais cela \xe9tait dans le but de vous expliquer les principes d'Ansible ; c'\xe9tait le seul compte dont nous disposions."]}),"\n",(0,r.jsxs)(s.p,{children:["L'objectif est de cr\xe9er un utilisateur ",(0,r.jsx)(s.code,{children:"user-ansible"})," sur tous les n\u0153uds ",(0,r.jsx)(s.code,{children:"testserver"})," et ",(0,r.jsx)(s.code,{children:"prodserver"}),". Vous pouvez le nommer autrement, mais l'avantage de choisir le m\xeame nom de compte est de ne pas sp\xe9cifier le ",(0,r.jsx)(s.code,{children:"username"})," lors de la connexion SSH."]}),"\n",(0,r.jsx)(s.p,{children:"Cet utilisateur doit \xe9galement avoir le privil\xe8ge sudo."}),"\n",(0,r.jsx)(s.p,{children:"De plus, pour se connecter en SSH, il est recommand\xe9 d'utiliser une paire de cl\xe9s plut\xf4t que d'utiliser un mot de passe."}),"\n",(0,r.jsxs)(s.p,{children:["Voici donc le chemin expliquant la connexion SSH entre le ",(0,r.jsx)(s.code,{children:"nodemanager"})," et les nodes. Le m\xeame compte ",(0,r.jsx)(s.code,{children:"user-ansible"})," du serveur ",(0,r.jsx)(s.code,{children:"nodemanager"})," doit \xeatre cr\xe9\xe9 sur les nodes :"]}),"\n",(0,r.jsx)(s.p,{children:"![Diagramme sans nom.drawio(1)](img\\Diagramme sans nom.drawio(1).png)"}),"\n",(0,r.jsx)(s.p,{children:(0,r.jsx)(s.strong,{children:"Pour accomplir cette t\xe2che vous avez besoin de :"})}),"\n",(0,r.jsxs)(s.ol,{children:["\n",(0,r.jsxs)(s.li,{children:["Se connecter au serveur ",(0,r.jsx)(s.code,{children:"prodserver"})," , cr\xe9er l'utilisateur ",(0,r.jsx)(s.code,{children:"user-ansible"})," et l'ajouter au groupe ",(0,r.jsx)(s.code,{children:"wheel"})," pour lui donner le privil\xe8ge sudo."]}),"\n",(0,r.jsxs)(s.li,{children:["Se connecter au serveur ",(0,r.jsx)(s.code,{children:"testserver"})," , cr\xe9er l'utilisateur ",(0,r.jsx)(s.code,{children:"user-ansible"})," et l'ajouter au groupe ",(0,r.jsx)(s.code,{children:"wheel"})," pour lui donner le privil\xe8ge sudo."]}),"\n",(0,r.jsxs)(s.li,{children:["G\xe9n\xe9rer une paire de cl\xe9s avec ",(0,r.jsx)(s.code,{children:"ssh-keygen "})]}),"\n",(0,r.jsxs)(s.li,{children:["Copier la cl\xe9 publique sur les serveurs ",(0,r.jsx)(s.code,{children:"prodserver"})," et ",(0,r.jsx)(s.code,{children:"testserver"})," avec la commande ",(0,r.jsx)(s.code,{children:"ssh-copy-id "})," par exemple."]}),"\n"]}),"\n",(0,r.jsx)(s.p,{children:"Etant donn\xe9 que nous travaillons avec Ansible, il est tr\xe8s pratique et utile de cr\xe9er un playbook qui automatise la cr\xe9ation d'un utilisateur sur les nodes, c'est l\xe0 l'int\xe9r\xeat. Puisque notre code est r\xe9utilisable, lors de l'ajout d'une nouvelle node \xe0 notre infrastructure, nous pouvons simplement lancer le playbook !"}),"\n",(0,r.jsxs)(s.p,{children:["Sous le dossier  ",(0,r.jsx)(s.code,{children:"devops-ansible-deployment"})," :"]}),"\n",(0,r.jsxs)(s.ol,{children:["\n",(0,r.jsxs)(s.li,{children:["Cr\xe9ez le fichier ",(0,r.jsx)(s.code,{children:"all.yml"})," sous ",(0,r.jsx)(s.code,{children:"group_vars/all"})]}),"\n",(0,r.jsxs)(s.li,{children:["Cr\xe9ez le fichier ",(0,r.jsx)(s.code,{children:"create_ansible_user.yml"})," sous ",(0,r.jsx)(s.code,{children:"playbooks"})]}),"\n"]}),"\n",(0,r.jsx)(s.pre,{children:(0,r.jsx)(s.code,{className:"language-bash",children:"[user-ansible@nodemanager devops-ansible-deployment]$ tree\r\n.\r\n\u251c\u2500\u2500 00_inventory.yml\r\n\u251c\u2500\u2500 group_vars\r\n\u2502   \u2514\u2500\u2500 all\r\n\u2502       \u2514\u2500\u2500 all.yml\r\n\u2514\u2500\u2500 playbooks\r\n    \u2514\u2500\u2500 create_ansible_user.yml\n"})}),"\n",(0,r.jsxs)(s.p,{children:["Dans le fichier ",(0,r.jsx)(s.code,{children:"all.yml"}),", ajoutez les variables suivantes :"]}),"\n",(0,r.jsx)(s.pre,{children:(0,r.jsx)(s.code,{className:"language-yaml",children:'ansible_user: "user-ansible"\r\nansible_user_group: "wheel"\n'})}),"\n",(0,r.jsxs)(s.ul,{children:["\n",(0,r.jsxs)(s.li,{children:["La variable ",(0,r.jsx)(s.code,{children:"ansible_user"})," d\xe9finit le nom du compte de l'utilisateur que vous allez cr\xe9er sur les n\u0153uds."]}),"\n",(0,r.jsxs)(s.li,{children:["La variable ",(0,r.jsx)(s.code,{children:"ansible_user_group"})," d\xe9finit le groupe de l'utilisateur ",(0,r.jsx)(s.code,{children:"wheel"})," (pour CentOS) afin qu'il puisse ex\xe9cuter des commandes avec les privil\xe8ges de root."]}),"\n"]}),"\n",(0,r.jsxs)(s.p,{children:["Nous avons \xe9galement besoin de d\xe9finir un mot de passe pour cet utilisateur, mais il doit \xeatre chiffr\xe9. Il ne faut surtout pas le laisser en clair. Pour cela, vous allez utiliser Ansible Vault pour chiffrer les donn\xe9es sensibles dans le fichier ",(0,r.jsx)(s.code,{children:"all.yml"}),"."]}),"\n",(0,r.jsxs)(s.blockquote,{children:["\n",(0,r.jsx)(s.p,{children:"Ansible Vault est un outil d'Ansible permettant de chiffrer de mani\xe8re s\xe9curis\xe9e les donn\xe9es sensibles, telles que les mots de passe, afin de renforcer la s\xe9curit\xe9 et la gestion centralis\xe9e dans les configurations automatis\xe9es."}),"\n"]}),"\n",(0,r.jsx)(s.h3,{id:"chiffrez-les-donn\xe9es-sensibles-avec-ansible-vault",children:"Chiffrez les donn\xe9es sensibles avec Ansible Vault"}),"\n",(0,r.jsxs)(s.p,{children:["Lancez la commande ",(0,r.jsx)(s.code,{children:"ansible-vault create group_vars/all/vault.yml"})," pour cr\xe9er un fichier chiffr\xe9 ; Ansible vous demandera de saisir un mot de passe. Ensuite, ouvrez le fichier cr\xe9\xe9 pour l'\xe9diter, et ajoutez la variable ",(0,r.jsx)(s.code,{children:"ansible_user_pass"})," d\xe9finissant le mot de passe de l'utilisateur, par exemple ",(0,r.jsx)(s.code,{children:"123321"}),". Il est recommand\xe9 d'utiliser un mot de passe robuste, notamment en environnement professionnel, bien que pour l'exemple, j'ai choisi le simple mot de passe ",(0,r.jsx)(s.code,{children:"123321"}),". Vous avez la libert\xe9 de choisir le mot de passe qui convient \xe0 votre contexte."]}),"\n",(0,r.jsx)(s.p,{children:"N'oubliez pas le mot de passe que vous avez choisi pour chiffrer le fichier vault.yml ; sans lui, il vous sera impossible de d\xe9chiffrer le fichier ou de lire les valeurs des variables."}),"\n",(0,r.jsxs)(s.p,{children:["Ansible propose plusieurs actions \xe0 passer avec la commande ",(0,r.jsx)(s.code,{children:"ansible-vault"}),", parmi lesquelles :"]}),"\n",(0,r.jsxs)(s.ol,{children:["\n",(0,r.jsxs)(s.li,{children:[(0,r.jsx)(s.code,{children:"create"})," : permet de cr\xe9er un nouveau fichier chiffr\xe9 en sp\xe9cifiant un mot de passe."]}),"\n",(0,r.jsxs)(s.li,{children:[(0,r.jsx)(s.code,{children:"decrypt"})," : elle est utilis\xe9e pour d\xe9chiffrer un fichier chiffr\xe9 et rendre son contenu lisible."]}),"\n",(0,r.jsxs)(s.li,{children:[(0,r.jsx)(s.code,{children:"edit"})," : permet de modifier le contenu d'un fichier chiffr\xe9 de mani\xe8re s\xe9curis\xe9e en d\xe9chiffrant temporairement et en rechiffrant automatiquement lors de l'enregistrement."]}),"\n",(0,r.jsxs)(s.li,{children:[(0,r.jsx)(s.code,{children:"view"})," : permet de consulter le contenu d'un fichier chiffr\xe9 sans n\xe9cessiter de d\xe9chiffrement explicite."]}),"\n",(0,r.jsxs)(s.li,{children:[(0,r.jsx)(s.code,{children:"encrypt"})," : elle est utilis\xe9e pour chiffrer un fichier existant."]}),"\n"]}),"\n",(0,r.jsx)(s.pre,{children:(0,r.jsx)(s.code,{className:"language-bash",children:"[user-ansible@nodemanager devops-ansible-deployment]$ ansible-vault create group_vars/all/vault.yml\r\nNew Vault password: \r\nConfirm New Vault password: \n"})}),"\n",(0,r.jsxs)(s.p,{children:["Voici le contenu du fichier ",(0,r.jsx)(s.code,{children:"vault.yml"})," apr\xe8s le chiffrement :"]}),"\n",(0,r.jsx)(s.pre,{children:(0,r.jsx)(s.code,{className:"language-bash",children:"$ANSIBLE_VAULT;1.1;AES256\r\n61666561393532663537346566363566373130653265313962313063366539383565643863386532\r\n6566343363326339613739356339353133333036383434320a373466356231313564333361363961\r\n33383938316533643835366531663532656539386166643766316465383638383539616633633733\r\n6435613161363037310a663832663537356362653366386165316665646338346335313362373066\r\n35623465356432393837366630303663666133343334333131313239303464623530\n"})}),"\n",(0,r.jsxs)(s.blockquote,{children:["\n",(0,r.jsxs)(s.p,{children:["Pour modifier le fichier Il est recommand\xe9 d'utiliser ",(0,r.jsx)(s.code,{children:"edit"})," au lieu de ",(0,r.jsx)(s.code,{children:"decrypt/encrypt"})," afin de ne pas oublier de rechiffrer le fichier apr\xe8s modification."]}),"\n"]}),"\n",(0,r.jsxs)(s.p,{children:["Visualisez le contenu de votre fichier ",(0,r.jsx)(s.code,{children:"vault.yml"})," avec l'action ",(0,r.jsx)(s.code,{children:"view"})," de ",(0,r.jsx)(s.code,{children:"ansible-vault"})," et l'option ",(0,r.jsx)(s.code,{children:"--ask-vault"})," :"]}),"\n",(0,r.jsx)(s.pre,{children:(0,r.jsx)(s.code,{children:"[user-ansible@nodemanager devops-ansible-deployment]$ ansible-vault view group_vars/all/vault.yml --ask-vault\r\nVault password: \r\nansible_user_pass: 123321\n"})}),"\n",(0,r.jsxs)(s.p,{children:["L'option ",(0,r.jsx)(s.code,{children:"--ask-vault"})," permet de demander \xe0 l'utilisateur de fournir le mot de passe utilis\xe9 lors du chiffrement. Vous pouvez \xe9galement l'utiliser avec les commandes ",(0,r.jsx)(s.code,{children:"ansible"})," et ",(0,r.jsx)(s.code,{children:"ansible-playbook"}),"."]}),"\n",(0,r.jsxs)(s.p,{children:["Alternativement, vous pouvez sauvegarder le mot de passe dans un fichier texte, par exemple, sous le dossier home de l'utilisateur, et indiquer \xe0 Ansible le chemin vers ce fichier avec l'option ",(0,r.jsx)(s.code,{children:"--vault-password-file ~/.passvault.txt"})," :"]}),"\n",(0,r.jsx)(s.pre,{children:(0,r.jsx)(s.code,{className:"language-bash",children:"[user-ansible@nodemanager devops-ansible-deployment]$ ansible-vault view group_vars/all/vault.yml --vault-password-file ~/.passvault.txt\r\nansible_user_pass: 123321\n"})}),"\n",(0,r.jsxs)(s.p,{children:["Une autre m\xe9thode consiste \xe0 fournir le chemin du fichier en utilisant la variable d'environnement ",(0,r.jsx)(s.code,{children:"ANSIBLE_VAULT_PASSWORD_FILE"})," :"]}),"\n",(0,r.jsx)(s.pre,{children:(0,r.jsx)(s.code,{children:"export ANSIBLE_VAULT_PASSWORD_FILE=~/.passvault.txt\n"})}),"\n",(0,r.jsxs)(s.blockquote,{children:["\n",(0,r.jsx)(s.p,{children:"Le fichier contenant le mot de passe doit \xeatre bien s\xe9curis\xe9 et ne pas \xeatre accessible \xe0 tout le monde."}),"\n"]}),"\n",(0,r.jsx)(s.p,{children:"Exportez le chemin vers le fichier contenant le mot de passe. Cela vous sera utile par la suite pour lancer les commandes Ansible sans interaction manuelle, surtout dans le cadre de notre pipeline CI/CD."}),"\n",(0,r.jsxs)(s.p,{children:["Pour persister l'exportation de la variable d'environnement ",(0,r.jsx)(s.code,{children:"ANSIBLE_VAULT_PASSWORD_FILE=~/.passvault.txt"}),", vous pouvez l'ajouter au fichier  ",(0,r.jsx)(s.code,{children:"~/.bash_profile"})," :"]}),"\n",(0,r.jsx)(s.pre,{children:(0,r.jsx)(s.code,{className:"language-bash",children:"[user-ansible@nodemanager ~]$ cat .bash_profile\r\n# .bash_profile\r\n\r\n# Get the aliases and functions\r\nif [ -f ~/.bashrc ]; then\r\n        . ~/.bashrc\r\nfi\r\n\r\n# User specific environment and startup programs\r\n\r\nPATH=$PATH:$HOME/.local/bin:$HOME/bin\r\n\r\nexport PATH\r\n\r\nexport ANSIBLE_VAULT_PASSWORD_FILE=~/.passvault.txt\r\n\n"})}),"\n",(0,r.jsxs)(s.p,{children:["Maintenant, dans votre fichier ",(0,r.jsx)(s.code,{children:"all.yml"}),", ajoutez la variable ",(0,r.jsx)(s.code,{children:"ansible_user_pass"}),". Sa valeur sera une r\xe9f\xe9rence vers la variable d\xe9finie dans ",(0,r.jsx)(s.code,{children:"vault.yml"})," :"]}),"\n",(0,r.jsx)(s.pre,{children:(0,r.jsx)(s.code,{className:"language-bash",children:'ansible_user: "user-ansible"\r\nansible_user_group: "wheel"\r\nansible_user_pass: "{{ vault_ansible_user_pass }}"\n'})}),"\n",(0,r.jsxs)(s.p,{children:["En effet, l'ajout de la r\xe9f\xe9rence ",(0,r.jsx)(s.code,{children:'ansible_user_pass: "{{ vault_ansible_user_pass }}"'})," n'est pas obligatoire, mais elle vous offre une visibilit\xe9 claire quant \xe0 l'utilisation de variables chiffr\xe9es. Puisque le fichier Vault est chiffr\xe9, si vous ne sp\xe9cifiez pas de r\xe9f\xe9rence dans votre fichier ",(0,r.jsx)(s.code,{children:"all.yml"}),", vous ne pouvez pas voir o\xf9 cette variable est d\xe9finie."]}),"\n",(0,r.jsx)(s.h3,{id:"cr\xe9ez-le-compte-utilisateur-avec-ansible-playbook",children:"Cr\xe9ez le compte utilisateur avec Ansible Playbook"}),"\n",(0,r.jsxs)(s.p,{children:["Voici le contenu du playbook ",(0,r.jsx)(s.code,{children:"create_ansible_user.yml"})," qui automatise les \xe9tapes de cr\xe9ation d'un nouvel utilisateur mentionn\xe9es au d\xe9but de cette section :"]}),"\n",(0,r.jsx)(s.pre,{children:(0,r.jsx)(s.code,{className:"language-yaml",children:'- name: Create a new user\r\n  hosts: all\r\n\r\n  tasks:\r\n  - name: Create ~/.ssh directory if none exists\r\n    file:\r\n      path: "/home/{{ ansible_user }}/.ssh"\r\n      state: directory\r\n      mode: "0700"\r\n    run_once: yes\r\n    delegate_to: localhost\r\n\r\n  - name: Generate SSH key\r\n    openssh_keypair:\r\n      path: "/home/{{ansible_user}}/.ssh/id_rsa"\r\n      type: rsa\r\n      size: 4096\r\n      state: present\r\n      force: no\r\n    run_once: yes\r\n    delegate_to: localhost\r\n\r\n  - name: Create a new user\r\n    user:\r\n      name: "{{ ansible_user }}"\r\n      shell: /bin/bash\r\n      groups: "{{ ansible_user_group }}"\r\n      append: yes\r\n      password: "{{ ansible_user_pass | password_hash(\'sha512\') }}"\r\n    become: yes\r\n\r\n  - name: Add user to the sudoers\r\n    copy:\r\n      dest: "/etc/sudoers.d/{{ ansible_user }}"\r\n      content: "{{ ansible_user }}  ALL=(ALL)  NOPASSWD: ALL"\r\n    become: yes\r\n\r\n  - name: Deploy SSH Key\r\n    authorized_key: \r\n      user: "{{ ansible_user }}"\r\n      key: "{{ lookup(\'file\', \'/home/{{ansible_user}}/.ssh/id_rsa.pub\') }}"\r\n      state: present\r\n    become: yes\r\n\n'})}),"\n",(0,r.jsxs)(s.p,{children:["Le playbook cible tous les h\xf4tes avec le groupe ",(0,r.jsx)(s.code,{children:"all"})," et d\xe9finit 5 t\xe2ches :"]}),"\n",(0,r.jsxs)(s.ol,{children:["\n",(0,r.jsxs)(s.li,{children:["On utilise le module ",(0,r.jsx)(s.code,{children:"file"})," pour cr\xe9er le r\xe9pertoire ",(0,r.jsx)(s.code,{children:"~/.ssh"}),". ",(0,r.jsx)(s.code,{children:"delegate_to: localhost"})," ex\xe9cute cette t\xe2che localement sur le ",(0,r.jsx)(s.code,{children:"nodemanager"}),", elle doit donc \xeatre ex\xe9cut\xe9e qu'une seule fois gr\xe2ce \xe0 ",(0,r.jsx)(s.code,{children:"run_once: yes"}),". Cela est d'autant plus important, car deux n\u0153uds, ",(0,r.jsx)(s.code,{children:"prodserver"})," et ",(0,r.jsx)(s.code,{children:"testserver"}),", sont d\xe9finis."]}),"\n",(0,r.jsxs)(s.li,{children:["On g\xe9n\xe8re la paire de cl\xe9s SSH avec le module ",(0,r.jsx)(s.code,{children:"openssh_keypair"}),". Son chemin est dans le dossier home de l'utilisateur, et on utilise la variable ",(0,r.jsx)(s.code,{children:'name: "{{ ansible_user }}"'})," d\xe9finie dans les group_vars, qui est ",(0,r.jsx)(s.code,{children:"user-ansible"}),"."]}),"\n",(0,r.jsxs)(s.li,{children:["On cr\xe9e l'utilisateur avec le module ",(0,r.jsx)(s.code,{children:"user"}),". Le mot de passe ",(0,r.jsx)(s.code,{children:"ansible_user_pass"})," est celui stock\xe9 dans le fichier ",(0,r.jsx)(s.code,{children:"vault.yml"}),", et il doit \xeatre hash\xe9 avec ",(0,r.jsx)(s.code,{children:"password_hash('sha512')"}),"."]}),"\n",(0,r.jsxs)(s.li,{children:["On utilise le module ",(0,r.jsx)(s.code,{children:"copy"})," pour cr\xe9er un fichier dans ",(0,r.jsx)(s.code,{children:"/etc/sudoers.d/"})," autorisant l'utilisateur \xe0 utiliser sudo sans mot de passe."]}),"\n",(0,r.jsxs)(s.li,{children:["Finalement, on utilise le module ",(0,r.jsx)(s.code,{children:"authorized_key"})," pour copier la cl\xe9 publique sur les n\u0153uds. Le ",(0,r.jsx)(s.code,{children:"lookup file"})," permet de chercher la cl\xe9 publique g\xe9n\xe9r\xe9e dans le dossier home de l'utilisateur."]}),"\n"]}),"\n",(0,r.jsxs)(s.blockquote,{children:["\n",(0,r.jsxs)(s.p,{children:["Le state ",(0,r.jsx)(s.code,{children:"present"})," indique que le fichier doit exister sur le node cible. Si le fichier n'existe pas, Ansible le cr\xe9era. Si le fichier existe d\xe9j\xe0, Ansible ne fera rien, car l'\xe9tat (",(0,r.jsx)(s.code,{children:"state"}),") est d\xe9j\xe0 conforme \xe0 ce qui est sp\xe9cifi\xe9 (",(0,r.jsx)(s.code,{children:"present"}),"). L'autre \xe9tat possible est ",(0,r.jsx)(s.code,{children:"absent"}),". Si vous souhaitez supprimer le fichier, vous pouvez consulter la documentation de chaque module pour conna\xeetre les valeurs possibles du param\xe8tre ",(0,r.jsx)(s.code,{children:"state"}),"."]}),"\n"]}),"\n",(0,r.jsx)(s.p,{children:"Lancez votre playbook :"}),"\n",(0,r.jsx)(s.pre,{children:(0,r.jsx)(s.code,{className:"language-bash",children:"[user-ansible@nodemanager devops-ansible-deployment]$ ansible-playbook -i 00_inventory.yml playbooks/create_ansible_user.yml\r\n\r\nPLAY [Create a new user] *****************************************************************************************************************************************************************************************\r\n\r\nTASK [Gathering Facts] **********************************************************************************************************************************************************************************************\r\nok: [testserver]\r\nok: [prodserver]\r\n\r\nTASK [Create ~/.ssh directory if none exists] *****************************************************************************************************************************************************************\r\nok: [prodserver -> localhost]\r\n\r\nTASK [generate SSH key] *********************************************************************************************************************************************************************************************\r\nok: [prodserver -> localhost]\r\n\r\nTASK [create a new user] ********************************************************************************************************************************************************************************************\r\nchanged: [testserver]\r\nchanged: [prodserver]\r\n\r\nTASK [add user to the sudoers] **************************************************************************************************************************************************************************************\r\nchanged: [prodserver]\r\nchanged: [testserver]\r\n\r\nTASK [Deploy SSH Key] ***********************************************************************************************************************************************************************************************\r\nchanged: [testserver]\r\nchanged: [prodserver]\r\n\r\nPLAY RECAP **********************************************************************************************************************************************************************************************************\r\nprodserver                 : ok=6    changed=3    unreachable=0    failed=0    skipped=0    rescued=0    ignored=0   \r\ntestserver                 : ok=4    changed=3    unreachable=0    failed=0    skipped=0    rescued=0    ignored=0   \n"})}),"\n",(0,r.jsx)(s.p,{children:"Vous pouvez constater que le compte utilisateur a \xe9t\xe9 cr\xe9\xe9 avec succ\xe8s !"}),"\n",(0,r.jsxs)(s.p,{children:["Testez alors la connexion SSH aux deux serveurs ",(0,r.jsx)(s.code,{children:"prodserver"})," et ",(0,r.jsx)(s.code,{children:"testserver"})," depuis le terminal du serveur ",(0,r.jsx)(s.code,{children:"nodemanager"}),". Vous devriez vous connecter sans sp\xe9cifier le mot de passe :"]}),"\n",(0,r.jsx)(s.pre,{children:(0,r.jsx)(s.code,{className:"language-bash",children:"[user-ansible@nodemanager ~]$ ssh 192.168.1.26\r\nLast login: Mon Jan  8 17:51:18 2024 from 192.168.1.173\r\n[user-ansible@testserver ~]$ exit\r\nd\xe9connexion\r\nConnection to 192.168.1.26 closed.\r\n[user-ansible@nodemanager ~]$ ssh 192.168.1.66\r\nLast login: Mon Jan  8 17:51:57 2024 from 192.168.1.173\r\n[user-ansible@prodserver ~]$ exit\r\nd\xe9connexion\r\nConnection to 192.168.1.66 closed.\r\n[user-ansible@nodemanager ~]$\n"})}),"\n",(0,r.jsxs)(s.p,{children:["Maintenant, dans votre fichier ",(0,r.jsx)(s.code,{children:"00_inventory.yml"}),", vous pouvez supprimer les param\xe8tres ",(0,r.jsx)(s.code,{children:"ansible_user"})," et ",(0,r.jsx)(s.code,{children:"ansible_ssh_pass"}),". Vous n'en aurez plus besoin dor\xe9navant, Ansible utilisera la paire de cl\xe9s SSH pour se connecter aux nodes, ainsi que l'utilisateur ",(0,r.jsx)(s.code,{children:"user-ansible"}),"."]}),"\n",(0,r.jsx)(s.pre,{children:(0,r.jsx)(s.code,{className:"language-yaml",children:"all:\r\n  children:\r\n    production:\r\n      hosts:\r\n        prodserver:\r\n          ansible_host: 192.168.1.66\r\n    staging:\r\n      hosts:\r\n        testserver:\r\n          ansible_host: 192.168.1.26\n"})}),"\n",(0,r.jsx)(s.h2,{id:"installez-docker-sur-les-nodes-avec-ansible-playbook",children:"Installez docker sur les nodes avec Ansible Playbook"}),"\n",(0,r.jsxs)(s.p,{children:["Notre application Spring Boot est conteneuris\xe9e avec Docker. Ainsi, pour le d\xe9ploiement, nous avons besoin de Docker install\xe9 sur les nodes ",(0,r.jsx)(s.code,{children:"prodserver"})," et ",(0,r.jsx)(s.code,{children:"testserver"}),"."]}),"\n",(0,r.jsxs)(s.p,{children:["Vous allez \xe9galement utiliser un playbook pour installer Docker sur les nodes. Cr\xe9ez un playbook ",(0,r.jsx)(s.code,{children:"docker_install.yml"})," sous le dossier ",(0,r.jsx)(s.code,{children:"playbooks/"})]}),"\n",(0,r.jsx)(s.p,{children:"Voici son contenu :"}),"\n",(0,r.jsx)(s.pre,{children:(0,r.jsx)(s.code,{className:"language-yaml",children:'- name: Install docker Engine on CentOS\r\n  hosts: all\r\n  become: true\r\n  tasks:\r\n\r\n  - name: Remove docker if installed from CentOS repo\r\n    yum:\r\n      name:\r\n        - docker\r\n        - docker-client\r\n        - docker-client-latest\r\n        - docker-common\r\n        - docker-latest\r\n        - docker-latest-logrotate\r\n        - docker-logrotate\r\n        - docker-engine\r\n      state: removed\r\n  - name: Install yum utils\r\n    yum:\r\n      name:\r\n        - yum-utils\r\n        - device-mapper-persistent-data\r\n        - lvm2\r\n      state: latest      \r\n\r\n  - name: Add Docker repo\r\n    get_url:\r\n      url: https://download.docker.com/linux/centos/docker-ce.repo\r\n      dest: /etc/yum.repos.d/docker-ce.repo\r\n\r\n  - name: Install Docker Engine\r\n    yum:\r\n      name:\r\n        - docker-ce\r\n        - docker-ce-cli\r\n        - containerd.io\r\n        - docker-buildx-plugin\r\n        - docker-compose-plugin\r\n      state: latest\r\n  - name: Start Docker service\r\n    service:\r\n      name: docker\r\n      state: started\r\n      enabled: yes\r\n    \r\n  - name: "Add user {{ ansible_user }} to docker group"\r\n    user:\r\n      name: "{{ ansible_user }}"\r\n      groups: docker\r\n      append: yes\n'})}),"\n",(0,r.jsxs)(s.p,{children:["Dans ce playbook, j'ai simplement traduit les \xe9tapes d'installation de Docker Engine sur CentOS, telles qu'indiqu\xe9es dans ",(0,r.jsx)(s.a,{href:"https://docs.docker.com/engine/install/centos/",children:"la documentation officielle"})," de Docker, en tant que t\xe2ches Ansible."]}),"\n",(0,r.jsxs)(s.p,{children:["La derni\xe8re t\xe2che, ",(0,r.jsx)(s.code,{children:"Add user {{ ansible_user }} to docker group"}),", permet d'ajouter l'utilisateur ",(0,r.jsx)(s.code,{children:"user-ansible"})," que nous avons cr\xe9\xe9 au groupe Docker. Cela lui permettra d'interagir avec le moteur Docker sans avoir besoin des privil\xe8ges ",(0,r.jsx)(s.code,{children:"sudo"}),"."]}),"\n",(0,r.jsx)(s.p,{children:"Lancez le playbook :"}),"\n",(0,r.jsx)(s.pre,{children:(0,r.jsx)(s.code,{className:"language-bash",children:"[user-ansible@nodemanager devops-ansible-deployment]$ ansible-playbook -i 00_inventory.yml playbooks/docker-install.yml \r\n\r\nPLAY [Install docker Engine on CentOS] ******************************************************************************************************************************************************************************\r\n\r\nTASK [Gathering Facts] **********************************************************************************************************************************************************************************************\r\nok: [testserver]\r\nok: [prodserver]\r\n\r\nTASK [Remove docker if installed from CentOS repo] ******************************************************************************************************************************************************************\r\nok: [prodserver] => (item=[u'docker', u'docker-client', u'docker-client-latest', u'docker-common', u'docker-latest', u'docker-latest-logrotate', u'docker-logrotate', u'docker-engine'])\r\nok: [testserver] => (item=[u'docker', u'docker-client', u'docker-client-latest', u'docker-common', u'docker-latest', u'docker-latest-logrotate', u'docker-logrotate', u'docker-engine'])\r\n\r\nTASK [Install yum utils] ********************************************************************************************************************************************************************************************\r\nchanged: [prodserver] => (item=[u'yum-utils', u'device-mapper-persistent-data', u'lvm2'])\r\nchanged: [testserver] => (item=[u'yum-utils', u'device-mapper-persistent-data', u'lvm2'])\r\n\r\nTASK [Add Docker repo] **********************************************************************************************************************************************************************************************\r\nchanged: [testserver]\r\nchanged: [prodserver]\r\n\r\nTASK [Install Docker Engine] ****************************************************************************************************************************************************************************************\r\nchanged: [prodserver] => (item=[u'docker-ce', u'docker-ce-cli', u'containerd.io', u'docker-buildx-plugin', u'docker-compose-plugin'])\r\nchanged: [testserver] => (item=[u'docker-ce', u'docker-ce-cli', u'containerd.io', u'docker-buildx-plugin', u'docker-compose-plugin'])\r\n\r\nTASK [Start Docker service] *****************************************************************************************************************************************************************************************\r\nchanged: [testserver]\r\nchanged: [prodserver]\r\n\r\nTASK [Add user user-ansible to docker group] ************************************************************************************************************************************************************************\r\nchanged: [prodserver]\r\nchanged: [testserver]\r\n\r\nPLAY RECAP **********************************************************************************************************************************************************************************************************\r\nprodserver                 : ok=7    changed=5    unreachable=0    failed=0    skipped=0    rescued=0    ignored=0   \r\ntestserver                 : ok=7    changed=5    unreachable=0    failed=0    skipped=0    rescued=0    ignored=0  \n"})}),"\n",(0,r.jsx)(s.p,{children:"Sur les nodes, vous pouvez v\xe9rifier que Docker a bien \xe9t\xe9 install\xe9 :"}),"\n",(0,r.jsx)(s.pre,{children:(0,r.jsx)(s.code,{className:"language-bash",children:"[user-ansible@prodserver ~]$ docker --version\r\nDocker version 24.0.7, build afdd53b\r\n\r\n[user-ansible@testserver ~]$ docker --version\r\nDocker version 24.0.7, build afdd53b\n"})}),"\n",(0,r.jsx)(s.h2,{id:"configurez-docker-pour-le-d\xe9ploiement",children:"Configurez docker pour le d\xe9ploiement"}),"\n",(0,r.jsxs)(s.p,{children:["Pour d\xe9ployer l'application Spring Boot, nous r\xe9cup\xe9rerons l'image Docker publi\xe9e sur le registre priv\xe9 (Nexus3). Dans cette \xe9tape, nous utiliserons la version ",(0,r.jsx)(s.code,{children:"latest"})," comme version par d\xe9faut. Ensuite, dans notre pipeline CI/CD, nous aborderons l'automatisation de la gestion des versions."]}),"\n",(0,r.jsxs)(s.p,{children:["Cependant, rappelez-vous que le registre priv\xe9 n'est accessible que via HTTP. Il est donc n\xe9cessaire de configurer Docker sur chaque serveur pour autoriser la communication avec les registres non s\xe9curis\xe9s. Nous avons d\xe9j\xe0 effectu\xe9 cette configuration manuellement pour Docker sur le ",(0,r.jsx)(s.code,{children:"masterserver"}),". \xc0 pr\xe9sent, vous allez tirer parti d'Ansible pour automatiser cette t\xe2che !"]}),"\n",(0,r.jsxs)(s.p,{children:["Petit rappel : pour autoriser la communication avec les registres non s\xe9curis\xe9s, il suffit de les ajouter au fichier ",(0,r.jsx)(s.code,{children:"daemon.json"})," sous ",(0,r.jsx)(s.code,{children:"/etc/docker"}),"."]}),"\n",(0,r.jsxs)(s.p,{children:["Avec Ansible, pour copier le fichier sur les n\u0153uds, vous pouvez utiliser le module ",(0,r.jsx)(s.code,{children:"copy"})," ou ",(0,r.jsx)(s.code,{children:"template"}),". Nous opterons pour l'utilisation du module ",(0,r.jsx)(s.code,{children:"template"}),"."]}),"\n",(0,r.jsxs)(s.blockquote,{children:["\n",(0,r.jsxs)(s.p,{children:["L'utilisation de templates au lieu du module ",(0,r.jsx)(s.code,{children:"copy"})," dans Ansible offre une flexibilit\xe9 \xe0 l'aide du moteur de templates Jinja2."]}),"\n",(0,r.jsx)(s.p,{children:"Jinja2 se pr\xe9sente comme un syst\xe8me de templates puissant, applicable non seulement directement dans vos playbooks gr\xe2ce aux filtres, mais aussi pour la g\xe9n\xe9ration dynamique de fichiers par exemple (le remplacement dynamique des variables)."}),"\n",(0,r.jsxs)(s.p,{children:["Consultez la documentation officielle sur ",(0,r.jsx)(s.a,{href:"https://docs.ansible.com/ansible/2.9/user_guide/playbooks_templating.html",children:"les templates Jinja avec Ansible"})," pour en savoir plus"]}),"\n"]}),"\n",(0,r.jsxs)(s.p,{children:["Cr\xe9ez le fichier ",(0,r.jsx)(s.code,{children:"daemon.json.j2"})," sous le dossier playbooks > templates :"]}),"\n",(0,r.jsx)(s.pre,{children:(0,r.jsx)(s.code,{className:"language-bash",children:"[user-ansible@nodemanager devops-ansible-deployment]$ tree\r\n.\r\n\u251c\u2500\u2500 00_inventory.yml\r\n\u251c\u2500\u2500 group_vars\r\n\u2502   \u2514\u2500\u2500 all\r\n\u2502       \u251c\u2500\u2500 all.yml\r\n\u2502       \u2514\u2500\u2500 vault.yml\r\n\u2514\u2500\u2500 playbooks\r\n    \u251c\u2500\u2500 create_ansible_user.yml\r\n    \u251c\u2500\u2500 docker_install.yml\r\n    \u2514\u2500\u2500 templates\r\n        \u2514\u2500\u2500 daemon.json.j2\n"})}),"\n",(0,r.jsx)(s.p,{children:"Voici son contenu :"}),"\n",(0,r.jsx)(s.pre,{children:(0,r.jsx)(s.code,{className:"language-json",children:'[user-ansible@nodemanager devops-ansible-deployment]$ cat playbooks/templates/daemon.json.j2 \r\n{\r\n  "insecure-registries": ["http://prod.local:5002", "http://prod.local:5003"]\r\n}\n'})}),"\n",(0,r.jsxs)(s.p,{children:["Dans le dossier playbooks, cr\xe9ez un le playbook ",(0,r.jsx)(s.code,{children:"docker_config.yaml"})]}),"\n",(0,r.jsx)(s.pre,{children:(0,r.jsx)(s.code,{className:"language-yaml",children:'- name: Configure Docker daemon.json for insecure registries\r\n  hosts: all\r\n  become: true\r\n  tasks:\r\n    - name: Create daemon.json\r\n      template:\r\n        src: templates/daemon.json.j2\r\n        dest: /etc/docker/daemon.json\r\n      notify: Restart Docker Service\r\n\r\n    - name: add domaine to /etc/hosts\r\n      lineinfile:\r\n        path: /etc/hosts\r\n        line: "192.168.1.137 prod.local"\r\n\r\n  handlers:\r\n    - name: Restart Docker Service\r\n      systemd:\r\n        name: docker\r\n        state: restarted\n'})}),"\n",(0,r.jsxs)(s.p,{children:["Le module ",(0,r.jsx)(s.code,{children:"template"})," prend en compte la source, qui est le fichier que vous venez de cr\xe9er, ainsi que la destination vers laquelle il sera copi\xe9. Il est ensuite n\xe9cessaire de red\xe9marrer Docker pour qu'il prenne en compte ces modifications. ",(0,r.jsx)(s.code,{children:"notify"})," permet de d\xe9clencher le ",(0,r.jsx)(s.code,{children:"handler"})," 'Restart Docker Service', qui utilise tout simplement le module ",(0,r.jsx)(s.code,{children:"systemd"})," pour red\xe9marrer le service Docker."]}),"\n",(0,r.jsxs)(s.p,{children:["Vous pouvez \xe9galement profiter de ce playbook de configuration pour ajouter le nom de domaine local ",(0,r.jsx)(s.code,{children:"prod.local"})," qui pointe vers le ",(0,r.jsx)(s.code,{children:"masterserver"})," o\xf9 nous allons installer Nexus."]}),"\n",(0,r.jsx)(s.p,{children:"Il ne vous reste plus qu'\xe0 tester. Ex\xe9cutez alors le playbook :"}),"\n",(0,r.jsx)(s.pre,{children:(0,r.jsx)(s.code,{className:"language-bash",children:"[user-ansible@nodemanager devops-ansible-deployment]$ ansible-playbook -i 00_inventory.yml playbooks/docker_config.yml \r\n\r\nPLAY [Configure Docker daemon.json for insecure registries] *********************************************************************************************************************************************************\r\n\r\nTASK [Gathering Facts] **********************************************************************************************************************************************************************************************\r\nok: [prodserver]\r\nok: [testserver]\r\n\r\nTASK [Create daemon.json] *******************************************************************************************************************************************************************************************\r\nchanged: [prodserver]\r\nchanged: [testserver]\r\n\r\nTASK [add domaine to /etc/hosts] ************************************************************************************************************************************************************************************\r\nchanged: [prodserver]\r\nchanged: [testserver]\r\n\r\nRUNNING HANDLER [Restart Docker Service] ****************************************************************************************************************************************************************************\r\nchanged: [prodserver]\r\nchanged: [testserver]\r\n\r\nPLAY RECAP **********************************************************************************************************************************************************************************************************\r\nprodserver                 : ok=4    changed=3    unreachable=0    failed=0    skipped=0    rescued=0    ignored=0   \r\ntestserver                 : ok=4    changed=3    unreachable=0    failed=0    skipped=0    rescued=0    ignored=0   \n"})}),"\n",(0,r.jsx)(s.p,{children:"Vous pouvez v\xe9rifier sur les nodes que le fichier a \xe9t\xe9 bien ajout\xe9 :"}),"\n",(0,r.jsx)(s.pre,{children:(0,r.jsx)(s.code,{className:"language-json",children:'[user-ansible@testserver ~]$ cat /etc/docker/daemon.json\r\n{\r\n  "insecure-registries": ["http://prod.local:5002", "http://prod.local:5003"]\r\n}\n'})}),"\n",(0,r.jsx)(s.p,{children:"Pour le nom de domaine \xe9galement, vous pouvez effectuer un ping pour v\xe9rifier que tout fonctionne comme pr\xe9vu."}),"\n",(0,r.jsx)(s.pre,{children:(0,r.jsx)(s.code,{className:"language-bash",children:"[user-ansible@testserver ~]$ cat /etc/hosts\r\n127.0.0.1   localhost testserver\r\n::1         localhost testserver\r\n192.168.1.137 prod.local\r\n[user-ansible@testserver ~]$ ping prod.local\r\nPING prod.local (192.168.1.137) 56(84) bytes of data.\r\n64 bytes from prod.local (192.168.1.137): icmp_seq=1 ttl=64 time=0.345 ms\r\n64 bytes from prod.local (192.168.1.137): icmp_seq=2 ttl=64 time=0.584 ms\r\n64 bytes from prod.local (192.168.1.137): icmp_seq=3 ttl=64 time=0.963 ms\r\n^C\r\n--- prod.local ping statistics ---\r\n3 packets transmitted, 3 received, 0% packet loss, time 2041ms\r\nrtt min/avg/max/mdev = 0.345/0.630/0.963/0.256 ms\r\n\n"})}),"\n",(0,r.jsx)(s.h2,{id:"d\xe9ployez-votre-application",children:"D\xe9ployez votre application"}),"\n",(0,r.jsx)(s.p,{children:"La derni\xe8re \xe9tape dans cette section consiste \xe0 automatiser le d\xe9ploiement de votre application avec Ansible."}),"\n",(0,r.jsxs)(s.p,{children:["Vous aurez besoin de vous connecter au registre Docker priv\xe9. L'identifiant et le mot de passe de l'utilisateur doivent \xeatre enregistr\xe9s dans un endroit s\xe9curis\xe9. Effectuez ensuite une modification (",(0,r.jsx)(s.code,{children:"edit"}),") du fichier ",(0,r.jsx)(s.code,{children:"vault.yml"})," pour ajouter ",(0,r.jsx)(s.code,{children:"nexus_registry_username"})," et ",(0,r.jsx)(s.code,{children:"nexus_registry_password"})," :"]}),"\n",(0,r.jsx)(s.pre,{children:(0,r.jsx)(s.code,{className:"language-bash",children:"[user-ansible@nodemanager devops-ansible-deployment]$ ansible-vault edit group_vars/all/vault.yml\r\n[user-ansible@nodemanager devops-ansible-deployment]$ ansible-vault view group_vars/all/vault.yml\r\nansible_user_pass: 123321\r\nnexus_registry_username: admin\r\nnexus_registry_password: 123321\n"})}),"\n",(0,r.jsx)(s.p,{children:'Utilisez le m\xeame compte que celui que vous avez utilis\xe9 dans la section Nexus. Dans mon cas, j\'utilise toujours le compte "admin" pour la d\xe9mo. Cependant, en entreprise, il est recommand\xe9 de cr\xe9er un compte utilisateur d\xe9di\xe9 et de g\xe9rer les autorisations en cons\xe9quence.'}),"\n",(0,r.jsxs)(s.p,{children:["Dans votre fichier ",(0,r.jsx)(s.code,{children:"all.yml"}),"ajouter les variables suivantes :"]}),"\n",(0,r.jsxs)(s.ol,{children:["\n",(0,r.jsx)(s.li,{children:"nexus_registry_username"}),"\n",(0,r.jsx)(s.li,{children:"nexus_registry_password"}),"\n",(0,r.jsx)(s.li,{children:"nexus_registry_url"}),"\n",(0,r.jsx)(s.li,{children:"docker_image_name"}),"\n",(0,r.jsx)(s.li,{children:"docker_image_tag"}),"\n",(0,r.jsx)(s.li,{children:"docker_container_name"}),"\n",(0,r.jsx)(s.li,{children:"docker_container_port"}),"\n"]}),"\n",(0,r.jsx)(s.pre,{children:(0,r.jsx)(s.code,{className:"language-yaml",children:'ansible_user: "user-ansible"\r\nansible_user_group: "wheel"\r\nansible_user_pass: "{{ vault_ansible_user_pass }}"\r\n\r\nnexus_registry_username: "{{ vault_nexus_registry_username }}"\r\nnexus_registry_password: "{{ vault_nexus_registry_password }}"\r\nnexus_registry_url: "prod.local:5003"\r\n\r\ndocker_image_name: "devops-project-samples"\r\ndocker_image_tag: "latest"\r\ndocker_container_name: "springbootapp"\r\ndocker_container_port: "7070"\n'})}),"\n",(0,r.jsxs)(s.p,{children:["Dans la section pr\xe9c\xe9dente, nous avons construit l'image ",(0,r.jsx)(s.code,{children:"devops-project-samples"})," en version ",(0,r.jsx)(s.code,{children:"latest"}),". Dans notre pipeline CI/CD, nous pourrons red\xe9finir ",(0,r.jsx)(s.code,{children:"docker_image_tag"})," pour sp\xe9cifier la version de l'image Docker cr\xe9\xe9e lors du processus de build."]}),"\n",(0,r.jsx)(s.p,{children:(0,r.jsx)(s.strong,{children:"Les \xe9tapes n\xe9cessaires pour d\xe9ployer l'application :"})}),"\n",(0,r.jsx)(s.p,{children:"Avec un playbook Ansible, vous allez automatiser les \xe9tapes suivantes :"}),"\n",(0,r.jsxs)(s.ol,{children:["\n",(0,r.jsx)(s.li,{children:"Arr\xeater le conteneur s'il existe et le supprimer."}),"\n",(0,r.jsx)(s.li,{children:"Supprimer l'ancienne image Docker."}),"\n",(0,r.jsx)(s.li,{children:"S'authentifier au registre priv\xe9."}),"\n",(0,r.jsx)(s.li,{children:"R\xe9cup\xe9rer la nouvelle image Docker."}),"\n",(0,r.jsx)(s.li,{children:"D\xe9marrer le conteneur."}),"\n"]}),"\n",(0,r.jsxs)(s.p,{children:["Cr\xe9ez alors le fichier ",(0,r.jsx)(s.code,{children:"deploy_playbook.yml"}),"\xe0 la racine de votre fichier :"]}),"\n",(0,r.jsx)(s.pre,{children:(0,r.jsx)(s.code,{className:"language-yaml",children:'- name: deploy app\r\n  hosts: all\r\n  \r\n  tasks:\r\n    - name: Stop and remove existing container\r\n      docker_container:\r\n        name: "{{ docker_container_name }}"\r\n        state: absent\r\n      ignore_errors: yes  # Ignore if the container does not exist\r\n\r\n    - name: Prune unused Docker images\r\n      command: docker image prune -f\r\n\r\n    - name: Log in to Nexus registry\r\n      docker_login:\r\n        registry_url: "{{ nexus_registry_url }}"\r\n        username: "{{ nexus_registry_username }}"\r\n        password: "{{ nexus_registry_password }}"\r\n        reauthorize: yes\r\n\r\n    - name: Pull the image from Nexus registry\r\n      docker_image:\r\n        name: "{{ nexus_registry_url }}/{{ docker_image_name }}"\r\n        source: pull\r\n        tag: "{{ docker_image_tag }}"\r\n\r\n    - name: Start the new container\r\n      docker_container:\r\n        name: "{{ docker_container_name }}"\r\n        image: "{{ nexus_registry_url }}/{{ docker_image_name }}:{{ docker_image_tag }}"\r\n        ports:\r\n          - "{{ docker_container_port }}:7070"\r\n        state: started\n'})}),"\n",(0,r.jsx)(s.p,{children:"Ensuite, lancez l'ex\xe9cution du playbook :"}),"\n",(0,r.jsx)(s.pre,{children:(0,r.jsx)(s.code,{className:"language-bash",children:"[user-ansible@nodemanager devops-ansible-deployment]$ ansible-playbook -i 00_inventory.yml deploy_playbook.yml \r\n\r\nPLAY [Manage Docker image from a private Nexus registry] ************************************************************************************************************************************************************\r\n\r\nTASK [Gathering Facts] **********************************************************************************************************************************************************************************************\r\nok: [prodserver]\r\nok: [testserver]\r\n\r\nTASK [Stop and remove existing container] ***************************************************************************************************************************************************************************\r\nok: [prodserver]\r\nok: [testserver]\r\n\r\nTASK [Prune unused Docker images] ***********************************************************************************************************************************************************************************\r\nchanged: [prodserver]\r\nchanged: [testserver]\r\n\r\nTASK [Log in to Nexus registry] *************************************************************************************************************************************************************************************\r\n[WARNING]: The value ******** (type int) in a string field was converted to u'********' (type string). If this does not look like what you expect, quote the entire value to ensure it does not change.\r\nchanged: [testserver]\r\nchanged: [prodserver]\r\n\r\nTASK [Pull the image from Nexus registry] ***************************************************************************************************************************************************************************\r\nok: [prodserver]\r\nok: [testserver]\r\n\r\nTASK [Start the new container] **************************************************************************************************************************************************************************************\r\nchanged: [prodserver]\r\nchanged: [testserver]\r\n\r\nPLAY RECAP **********************************************************************************************************************************************************************************************************\r\nprodserver                 : ok=6    changed=3    unreachable=0    failed=0    skipped=0    rescued=0    ignored=0   \r\ntestserver                 : ok=6    changed=3    unreachable=0    failed=0    skipped=0    rescued=0    ignored=0   \n"})}),"\n",(0,r.jsxs)(s.p,{children:["Il est temps de v\xe9rifier  que notre application est d\xe9ploy\xe9e, faites un ",(0,r.jsx)(s.code,{children:"docker ps"})," sur les nodes pour v\xe9rifier que le conteneur est en train d'ex\xe9cution"]}),"\n",(0,r.jsx)(s.pre,{children:(0,r.jsx)(s.code,{className:"language-bash",children:'[user-ansible@testserver ~]$ docker ps\r\nCONTAINER ID   IMAGE                                           COMMAND                  CREATED         STATUS         PORTS                    NAMES\r\n2324c87eb469   prod.local:5003/devops-project-samples:latest   "java -jar /opt/app/\u2026"   4 minutes ago   Up 4 minutes   0.0.0.0:7070->7070/tcp   springbootapp\r\n\n'})}),"\n",(0,r.jsxs)(s.p,{children:["Vous pouvez donc acc\xe9der \xe0 l'application avec l'adresse IP du node et le port ",(0,r.jsx)(s.code,{children:"7070"}),". Voici la r\xe9ponse du ",(0,r.jsx)(s.code,{children:"testserver"})," :"]}),"\n",(0,r.jsx)(s.p,{children:(0,r.jsx)(s.img,{alt:"image-20240114173746864",src:n(5494).Z+"",width:"519",height:"190"})}),"\n",(0,r.jsxs)(s.p,{children:["Sur le ",(0,r.jsx)(s.code,{children:"prodserver"})," :"]}),"\n",(0,r.jsx)(s.pre,{children:(0,r.jsx)(s.code,{className:"language-bash",children:'[user-ansible@prodserver ~]$ docker ps\r\nCONTAINER ID   IMAGE                                           COMMAND                  CREATED         STATUS         PORTS                    NAMES\r\na7775d71725e   prod.local:5003/devops-project-samples:latest   "java -jar /opt/app/\u2026"   5 minutes ago   Up 5 minutes   0.0.0.0:7070->7070/tcp   springbootapp\r\n\n'})}),"\n",(0,r.jsx)(s.p,{children:(0,r.jsx)(s.img,{alt:"image-20240114173649623",src:n(4752).Z+"",width:"516",height:"188"})}),"\n",(0,r.jsxs)(s.p,{children:[(0,r.jsx)(s.strong,{children:"C'est tout bon !"})," Notre application est d\xe9ploy\xe9e sur les deux serveurs. Si vous relancez le playbook, elle sera donc red\xe9ploy\xe9e !"]})]})}function u(e={}){const{wrapper:s}={...(0,i.a)(),...e.components};return s?(0,r.jsx)(s,{...e,children:(0,r.jsx)(c,{...e})}):c(e)}},445:(e,s,n)=>{n.d(s,{Z:()=>r});const r=n.p+"assets/images/image-20240111205709313-ed6a0a2dd7daa2a40be15eff9564793b.png"},7182:(e,s,n)=>{n.d(s,{Z:()=>r});const r="data:image/png;base64,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"},3802:(e,s,n)=>{n.d(s,{Z:()=>r});const r=n.p+"assets/images/image-20240111210525558-5e29b00d95fad4dab1e55c941efa086e.png"},7621:(e,s,n)=>{n.d(s,{Z:()=>r});const r="data:image/png;base64,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"},7338:(e,s,n)=>{n.d(s,{Z:()=>r});const r=n.p+"assets/images/image-20240111211727770-dbda6d73e3b13a65f72667b65cf1671f.png"},2893:(e,s,n)=>{n.d(s,{Z:()=>r});const r=n.p+"assets/images/image-20240111212752044-c5740e5bc885bb4d61622d1449e160c4.png"},7151:(e,s,n)=>{n.d(s,{Z:()=>r});const r=n.p+"assets/images/image-20240112140055518-00ff1323e3fb53026ef6ca5aef9f0f92.png"},6879:(e,s,n)=>{n.d(s,{Z:()=>r});const r=n.p+"assets/images/image-20240112212928589-f32aae19b530d6b191e8efa31b2d01b3.png"},4754:(e,s,n)=>{n.d(s,{Z:()=>r});const r=n.p+"assets/images/image-20240112213049046-272f8c3d90d5f9d064c63fdeb419fcff.png"},9135:(e,s,n)=>{n.d(s,{Z:()=>r});const r=n.p+"assets/images/image-20240112214136155-6d6c0f20661bda2fda1f5161a177cbfb.png"},4752:(e,s,n)=>{n.d(s,{Z:()=>r});const r=n.p+"assets/images/image-20240114173649623-bcba92667e41070079573c3b245934fa.png"},5494:(e,s,n)=>{n.d(s,{Z:()=>r});const r=n.p+"assets/images/image-20240114173746864-e7ac4b975193f8006a767f741274c1de.png"},1151:(e,s,n)=>{n.d(s,{Z:()=>o,a:()=>a});var r=n(7294);const i={},l=r.createContext(i);function a(e){const s=r.useContext(l);return r.useMemo((function(){return"function"==typeof e?e(s):{...s,...e}}),[s,e])}function o(e){let s;return s=e.disableParentContext?"function"==typeof e.components?e.components(i):e.components||i:a(e.components),r.createElement(l.Provider,{value:s},e.children)}}}]);